<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapperatorinator - یک چارچوب هوش مصنوعی برای تولید و ویرایش نقشه‌های osu! برای همه حالت‌های بازی از ورودی‌های اسپکتروگرام.</title>
    <meta name="description" content="یک چارچوب هوش مصنوعی برای تولید و ویرایش نقشه‌های osu! برای همه حالت‌های بازی از ورودی‌های اسپکتروگرام.">
    <meta name="keywords" content="Mapperatorinator, Persian, documentation, GitHub, open source">
    <meta name="author" content="OpenAiTx">
    <meta name="robots" content="index, follow">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "Mapperatorinator",
  "description": "یک چارچوب هوش مصنوعی برای تولید و ویرایش نقشه‌های osu! برای همه حالت‌های بازی از ورودی‌های اسپکتروگرام.",
  "author": {
    "@type": "Person",
    "name": "OliBomby"
  },
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "5",
    "ratingCount": 398
  },
  "url": "https://OpenAiTx.github.io/projects/OliBomby/Mapperatorinator/README-fa.html",
  "sameAs": "https://raw.githubusercontent.com/OliBomby/Mapperatorinator/main/README.md",
  "datePublished": "2026-01-24",
  "dateModified": "2026-01-24"
}
    </script>
    
    <!-- GitHub-style CSS -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #24292e;
            background-color: #ffffff;
            max-width: 980px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .container {
            background: #ffffff;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 24px;
            margin-bottom: 20px;
        }
        
        .header {
            border-bottom: 1px solid #e1e4e8;
            padding-bottom: 16px;
            margin-bottom: 24px;
        }
        
        .project-title {
            font-size: 2em;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .project-title a {
            color: #24292e;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: color 0.2s ease;
        }
        
        .project-title a:hover {
            color: #0366d6;
            text-decoration: none;
        }
        
        .project-title .github-icon {
            width: 1em;
            height: 1em;
            fill: currentColor;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }
        
        .project-title a:hover .github-icon {
            opacity: 1;
        }
        
        .project-meta {
            color: #586069;
            font-size: 14px;
            margin-bottom: 16px;
        }
        
        .stars {
            display: inline-block;
            margin-right: 16px;
        }
        
        .language {
            display: inline-block;
            background-color: #f1f8ff;
            color: #0366d6;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .content {
            font-size: 16px;
            line-height: 1.6;
        }
        
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
            color: #24292e;
        }
        
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        
        p {
            margin-bottom: 16px;
        }
        
        code {
            background-color: #f6f8fa;
            border-radius: 3px;
            font-size: 85%;
            margin: 0;
            padding: 0.2em 0.4em;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        }
        
        pre {
            background-color: #f6f8fa;
            border-radius: 6px;
            font-size: 85%;
            line-height: 1.45;
            overflow: auto;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        pre code {
            background-color: transparent;
            border: 0;
            display: inline;
            line-height: inherit;
            margin: 0;
            overflow: visible;
            padding: 0;
            word-wrap: normal;
        }
        
        a {
            color: #0366d6;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        ul, ol {
            margin-bottom: 16px;
            padding-left: 2em;
        }
        
        li {
            margin-bottom: 0.25em;
        }
        
        blockquote {
            border-left: 4px solid #dfe2e5;
            color: #6a737d;
            margin: 0 0 16px 0;
            padding: 0 1em;
        }
        
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e1e4e8;
            color: #586069;
            font-size: 14px;
            text-align: center;
        }
        
        .footer a {
            color: #0366d6;
        }
        
        .original-link {
            margin-top: 16px;
            padding: 12px;
            background-color: #f6f8fa;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 16px;
            }
            
            .project-title {
                font-size: 1.5em;
            }
        }
    </style>
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <!-- Bing Count -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sh95yd6uwt");
    </script>        

    <!-- Statcounter -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>    
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="project-title">
                <a href="https://github.com/OliBomby/Mapperatorinator" target="_blank" rel="noopener noreferrer">
                    <svg class="github-icon" viewBox="0 0 16 16" aria-hidden="true">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                    Mapperatorinator
                </a>
            </h1>
            <div class="project-meta">
                <span class="stars">⭐ 398 stars</span>
                <span class="language">Persian</span>
                <span>by OliBomby</span>
            </div>
        </div>
        
        <div class="content">
            <p><div align="right">
  <details>
    <summary >🌐 زبان</summary>
    <div>
      <div align="center">
        <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=en">English</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=zh-CN">简体中文</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=zh-TW">繁體中文</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=ja">日本語</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=ko">한국어</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=hi">हिन्दी</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=th">ไทย</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=fr">Français</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=de">Deutsch</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=es">Español</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=it">Italiano</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=ru">Русский</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=pt">Português</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=nl">Nederlands</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=pl">Polski</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=ar">العربية</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=fa">فارسی</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=tr">Türkçe</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=vi">Tiếng Việt</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=id">Bahasa Indonesia</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=as">অসমীয়া</
      </div>
    </div>
  </details>
</div></p><h1>Mapperatorinator</h1></p><p>مدل مولد را <a href="https://colab.research.google.com/github/OliBomby/Mapperatorinator/blob/main/colab/mapperatorinator_inference.ipynb" target="_blank" rel="noopener noreferrer">اینجا</a> امتحان کنید، یا MaiMod را <a href="https://colab.research.google.com/github/OliBomby/Mapperatorinator/blob/main/colab/mai_mod_inference.ipynb" target="_blank" rel="noopener noreferrer">اینجا</a> بررسی کنید. نمایش ویدیویی را <a href="https://youtu.be/FEr7t1L2EoA" target="_blank" rel="noopener noreferrer">اینجا</a> ببینید.</p><p>Mapperatorinator یک چارچوب چندمدلی است که از ورودی‌های طیف‌نگار برای تولید نقشه‌های کامل osu! برای همه حالت‌های بازی و <a href="#maimod-the-ai-driven-modding-tool" target="_blank" rel="noopener noreferrer">کمک به مدسازی نقشه‌ها</a> استفاده می‌کند.
هدف این پروژه تولید خودکار نقشه‌های osu! با کیفیت قابل رتبه‌بندی از هر آهنگی با درجه بالایی از سفارشی‌سازی است.</p><p>این پروژه بر پایه <a href="https://github.com/gyataro/osuT5" target="_blank" rel="noopener noreferrer">osuT5</a> و <a href="https://github.com/OliBomby/osu-diffusion" target="_blank" rel="noopener noreferrer">osu-diffusion</a> ساخته شده است. در توسعه این پروژه حدود ۲۵۰۰ ساعت محاسبات GPU در ۱۴۲ اجرا روی ۴۰۶۰ Ti خودم و نمونه‌های اجاره‌ای ۴۰۹۰ در vast.ai صرف کردم.</p><p>
#### از این ابزار به صورت مسئولانه استفاده کنید. همیشه استفاده از هوش مصنوعی در بیت‌مپ‌های خود را افشا کنید.</p><h2>نصب</h2></p><p>دستورالعمل زیر به شما اجازه می‌دهد تا بیت‌مپ‌ها را بر روی دستگاه محلی خود تولید کنید، همچنین می‌توانید آن را در فضای ابری با <a href="https://colab.research.google.com/github/OliBomby/Mapperatorinator/blob/main/colab/mapperatorinator_inference.ipynb" target="_blank" rel="noopener noreferrer">دفترچه colab</a> اجرا کنید.</p><h3>۱. مخزن را کلون کنید</h3></p><pre><code class="language-sh">git clone https://github.com/OliBomby/Mapperatorinator.git
cd Mapperatorinator</code></pre></p><h3>2. (اختیاری) ایجاد محیط مجازی</h3></p><p>از Python 3.10 استفاده کنید، نسخه‌های بعدی ممکن است با وابستگی‌ها ناسازگار باشند.</p><pre><code class="language-sh">python -m venv .venv</p><h1>In cmd.exe</h1>
.venv\Scripts\activate.bat
<h1>In PowerShell</h1>
.venv\Scripts\Activate.ps1
<h1>In Linux or MacOS</h1>
source .venv/bin/activate</code></pre></p><h3>۳. نصب وابستگی‌ها</h3></p><ul><li>پایتون ۳.۱۰</li>
<li><a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">گیت</a></li>
<li><a href="http://www.ffmpeg.org/" target="_blank" rel="noopener noreferrer">اف‌اف‌ام‌پگ</a></li>
<li><a href="https://developer.nvidia.com/cuda-zone" target="_blank" rel="noopener noreferrer">CUDA</a> (برای کارت‌های گرافیک NVIDIA) یا <a href="https://rocmdocs.amd.com/en/latest/Installation_Guide/Installation-Guide.html" target="_blank" rel="noopener noreferrer">ROCm</a> (برای کارت‌های گرافیک AMD روی لینوکس)</li>
<li><a href="https://pytorch.org/get-started/locally/" target="_blank" rel="noopener noreferrer">پای‌تورچ</a>: مطمئن شوید راهنمای شروع را دنبال می‌کنید تا <code>torch</code> و <code>torchaudio</code> را با پشتیبانی از GPU نصب کنید. نسخه صحیح Compute Platform که در مرحله قبل نصب کرده‌اید را انتخاب کنید.</li></p><p><li>و سایر وابستگی‌های پایتون:</li></p><p></ul><pre><code class="language-sh">pip install -r requirements.txt</code></pre></p><h2>رابط کاربری وب (توصیه‌شده)</h2></p><p>برای تجربه‌ای کاربرپسندتر، استفاده از رابط کاربری وب را مدنظر قرار دهید. این رابط، یک واسط گرافیکی برای تنظیم پارامترهای تولید، شروع فرایند و نظارت بر خروجی فراهم می‌کند.</p><h3>راه‌اندازی رابط کاربری گرافیکی</h3></p><p>در ترمینال خود به پوشه‌ی کلون‌شده‌ی <code>Mapperatorinator</code> بروید و اجرا کنید:</p><pre><code class="language-sh">python web-ui.py</code></pre>
این کار یک وب سرور محلی را راه‌اندازی کرده و رابط کاربری را به طور خودکار در یک پنجره جدید باز می‌کند.</p><h3>استفاده از رابط گرافیکی (GUI)</h3></p><ul><li><strong>پیکربندی:</strong> مسیرهای ورودی/خروجی را با استفاده از فیلدهای فرم و دکمه‌های "مرور" تنظیم کنید. پارامترهای تولید مانند حالت بازی، درجه سختی، سبک (سال، شناسه نگارنده، توصیف‌گرها)، زمان‌بندی، ویژگی‌های خاص (صداهای ضربه، زمان‌بندی ویژه) و غیره را تنظیم کنید که مشابه گزینه‌های خط فرمان هستند. (توجه: اگر یک <code>beatmap_path</code> وارد کنید، رابط کاربری به طور خودکار <code>audio_path</code> و <code>output_path</code> را از آن تعیین می‌کند، بنابراین می‌توانید این فیلدها را خالی بگذارید)</li>
<li><strong>شروع:</strong> برای آغاز ساخت بیت‌مپ، دکمه "شروع استنتاج" را کلیک کنید.</li>
<li><strong>لغو:</strong> می‌توانید فرآیند جاری را با دکمه "لغو استنتاج" متوقف کنید.</li>
<li><strong>باز کردن خروجی:</strong> پس از اتمام، از دکمه "باز کردن پوشه خروجی" برای دسترسی سریع به فایل‌های تولید شده استفاده کنید.</li></p><p></ul>رابط کاربری وب به عنوان یک پوشش راحت بر روی اسکریپت <code>inference.py</code> عمل می‌کند. برای گزینه‌های پیشرفته یا رفع اشکال، به دستورالعمل‌های خط فرمان مراجعه کنید.</p><p><img src="https://github.com/user-attachments/assets/5312a45f-d51c-4b37-9389-da3258ddd0a1" alt="python_u3zyW0S3Vs"></p><h2>استنتاج از طریق خط فرمان</h2></p><p>برای کاربرانی که خط فرمان را ترجیح می‌دهند یا به تنظیمات پیشرفته نیاز دارند، مراحل زیر را دنبال کنید. <strong>توجه:</strong> برای رابط کاربری ساده‌تر، لطفاً به بخش <a href="#web-ui-recommended" target="_blank" rel="noopener noreferrer">رابط کاربری وب (توصیه‌شده)</a> در بالا مراجعه کنید.</p><p>اسکریپت <code>inference.py</code> را اجرا کنید و برخی آرگومان‌ها را برای تولید بیت‌مپ‌ها وارد کنید. برای این منظور از <a href="https://hydra.cc/docs/advanced/override_grammar/basic/" target="_blank" rel="noopener noreferrer">سینتکس override های Hydra</a> استفاده کنید. برای مشاهده همه پارامترهای موجود به <code>configs/inference_v29.yaml</code> مراجعه کنید.</p><pre><code class="language-">python inference.py \
  audio_path           [Path to input audio] \
  output_path          [Path to output directory] \
  beatmap_path         [Path to .osu file to autofill metadata, and output_path, or use as reference] \
  
  gamemode             [Game mode to generate 0=std, 1=taiko, 2=ctb, 3=mania] \
  difficulty           [Difficulty star rating to generate] \
  mapper_id            [Mapper user ID for style] \
  year                 [Upload year to simulate] \
  hitsounded           [Whether to add hitsounds] \
  slider_multiplier    [Slider velocity multiplier] \
  circle_size          [Circle size] \
  keycount             [Key count for mania] \
  hold_note_ratio      [Hold note ratio for mania 0-1] \
  scroll_speed_ratio   [Scroll speed ratio for mania and ctb 0-1] \
  descriptors          [List of beatmap user tags for style] \
  negative_descriptors [List of beatmap user tags for classifier-free guidance] \
  
  add_to_beatmap       [Whether to add generated content to the reference beatmap instead of making a new beatmap] \
  start_time           [Generation start time in milliseconds] \
  end_time             [Generation end time in milliseconds] \
  in_context           [List of additional context to provide to the model [NONE,TIMING,KIAI,MAP,GD,NO_HS]] \
  output_type          [List of content types to generate] \
  cfg_scale            [Scale of the classifier-free guidance] \
  super_timing         [Whether to use slow accurate variable BPM timing generator] \
  seed                 [Random seed for generation] \</code></pre></p><p>مثال:
<pre><code class="language-">python inference.py beatmap_path="'C:\Users\USER\AppData\Local\osu!\Songs\1 Kenji Ninuma - DISCO PRINCE\Kenji Ninuma - DISCOPRINCE (peppy) [Normal].osu'" gamemode=0 difficulty=5.5 year=2023 descriptors="['jump aim','clean']" in_context=[TIMING,KIAI]</code></pre></p><h2>رابط خط فرمان تعاملی</h2>
برای کسانی که به محیط کاری مبتنی بر ترمینال علاقه دارند اما خواهان راه‌اندازی راهنمایی‌شده هستند، اسکریپت خط فرمان تعاملی جایگزین بسیار خوبی برای رابط کاربری وب است.</p><h3>اجرای خط فرمان</h3>
به پوشه‌ی کلون‌شده بروید. ممکن است لازم باشد ابتدا اسکریپت را قابل اجرا کنید.</p><pre><code class="language-sh"># Make the script executable (only needs to be done once)
chmod +x cli_inference.sh</code></pre></p><pre><code class="language-sh"># Run the script
./cli_inference.sh</code></pre></p><h3>استفاده از رابط خط فرمان (CLI)</h3>
این اسکریپت شما را مرحله به مرحله از طریق مجموعه‌ای از پرسش‌ها برای پیکربندی تمام پارامترهای تولید راهنمایی می‌کند، درست مانند رابط کاربری وب.</p><p>از یک رابط رنگی برای وضوح بیشتر استفاده می‌کند.
یک منوی پیشرفته چندانتخابی برای انتخاب توصیف‌کننده‌های سبک با استفاده از کلیدهای جهت و کلید فاصله ارائه می‌دهد.
پس از پاسخ به تمام سوالات، فرمان نهایی را برای بررسی شما نمایش می‌دهد.
سپس می‌توانید تأیید کنید تا آن را مستقیم اجرا کنید یا لغو کرده و فرمان را برای استفاده دستی کپی کنید.</p><h2>نکات تولید</h2></p><ul><li>می‌توانید فایل <code>configs/inference_v29.yaml</code> را ویرایش کرده و آرگومان‌های خود را به جای وارد کردن هر بار در ترمینال، آنجا اضافه کنید.</li>
<li>تمام توصیف‌کننده‌های موجود را می‌توانید <a href="https://osu.ppy.sh/wiki/en/Beatmap/Beatmap_tags" target="_blank" rel="noopener noreferrer">اینجا</a> پیدا کنید.</li>
<li>همیشه یک آرگومان سال بین ۲۰۰۷ تا ۲۰۲۳ ارائه دهید. اگر نامشخص بگذارید، مدل ممکن است تولیدی با سبک ناسازگار ایجاد کند.</li>
<li>همیشه یک آرگومان سختی ارائه دهید. اگر نامشخص بگذارید، مدل ممکن است تولیدی با سختی ناسازگار ایجاد کند.</li>
<li>پارامتر <code>cfg_scale</code> را افزایش دهید تا اثربخشی آرگومان‌های <code>mapper_id</code> و <code>descriptors</code> بیشتر شود.</li>
<li>می‌توانید از آرگومان <code>negative_descriptors</code> برای هدایت مدل دور از سبک‌های خاص استفاده کنید. این فقط زمانی کار می‌کند که <code>cfg_scale > 1</code> باشد. مطمئن شوید تعداد توصیف‌کننده‌های منفی با تعداد توصیف‌کننده‌ها برابر باشد.</li>
<li>اگر سبک آهنگ شما با سبک نقشه ضرب مورد نظر مطابقت خوبی نداشته باشد، مدل ممکن است از دستورالعمل‌های شما پیروی نکند. به عنوان مثال، تولید نقشه ضرب با SR بالا و SV بالا برای یک آهنگ آرام دشوار است.</li>
<li>اگر زمان‌بندی و زمان‌های Kiai آهنگ را قبلاً انجام داده‌اید، می‌توانید این اطلاعات را به مدل بدهید تا سرعت و دقت استنتاج به طور قابل توجهی افزایش یابد: از آرگومان‌های <code>beatmap_path</code> و <code>in_context=[TIMING,KIAI]</code> استفاده کنید.</li>
<li>برای نقشه‌برداری مجدد فقط بخشی از نقشه ضرب خود، از آرگومان‌های <code>beatmap_path</code>، <code>start_time</code>، <code>end_time</code> و <code>add_to_beatmap=true</code> استفاده کنید.</li>
<li>برای تولید دشواری مهمان برای یک نقشه ضرب، از آرگومان‌های <code>beatmap_path</code> و <code>in_context=[GD,TIMING,KIAI]</code> استفاده کنید.</li>
<li>برای تولید هیت‌ساند برای یک نقشه ضرب، از آرگومان‌های <code>beatmap_path</code> و <code>in_context=[NO_HS,TIMING,KIAI]</code> استفاده کنید.</li>
<li>برای تولید فقط زمان‌بندی برای یک آهنگ، از آرگومان‌های <code>super_timing=true</code> و <code>output_type=[TIMING]</code> استفاده کنید.</li></p><p></ul><h2>MaiMod: ابزار مدینگ مبتنی بر هوش مصنوعی</h2></p><p>MaiMod یک ابزار مدینگ برای نقشه‌ضرب‌های osu! است که از پیش‌بینی‌های Mapperatorinator برای یافتن خطاها و ناسازگاری‌های احتمالی استفاده می‌کند که سایر ابزارهای خودکار مدینگ مانند <a href="https://github.com/Naxesss/MapsetVerifier" target="_blank" rel="noopener noreferrer">Mapset Verifier</a> نمی‌توانند آنها را تشخیص دهند.
می‌تواند مشکلاتی مانند:
<ul><li>ضرب یا الگوهای ریتمیک نادرست</li>
<li>نقاط زمان‌بندی غیر دقیق</li>
<li>موقعیت‌های ناسازگار اشیاء ضرب یا قرارگیری نامناسب کامبوهای جدید</li>
<li>اشکال عجیب اسلایدرها</li>
<li>هیت‌ساند یا حجم‌های ناسازگار</li></p><p></ul>می‌توانید MaiMod را <a href="https://colab.research.google.com/github/OliBomby/Mapperatorinator/blob/main/colab/mai_mod_inference.ipynb" target="_blank" rel="noopener noreferrer">اینجا</a> امتحان کنید، یا به صورت محلی اجرا کنید:
برای اجرای MaiMod به صورت محلی، باید Mapperatorinator را نصب کنید. سپس، اسکریپت <code>mai_mod.py</code> را اجرا کرده و مسیر نقشه ضرب خود را با آرگومان <code>beatmap_path</code> مشخص کنید.
<pre><code class="language-sh">python mai_mod.py beatmap_path="'C:\Users\USER\AppData\Local\osu!\Songs\1 Kenji Ninuma - DISCO PRINCE\Kenji Ninuma - DISCOPRINCE (peppy) [Normal].osu'"</code></pre>
این کار پیشنهادات مدینگ را در کنسول چاپ می‌کند که سپس می‌توانید آن‌ها را به صورت دستی روی بیت‌مپ خود اعمال کنید.
پیشنهادات به ترتیب زمانی مرتب شده و در دسته‌بندی‌های مختلف گروه‌بندی شده‌اند.
مقدار اول در دایره نشان‌دهنده «سورپرایزال» است که معیاری از میزان غیرمنتظره بودن مشکل توسط مدل می‌باشد، بنابراین می‌توانید مهم‌ترین مشکلات را در اولویت قرار دهید.</p><p>مدل ممکن است اشتباه کند، به ویژه در مشکلات با سورپرایزال پایین، پس همیشه قبل از اعمال پیشنهادات به بیت‌مپ خود، آن‌ها را دوباره بررسی کنید.
هدف اصلی کمک به شما برای محدود کردن فضای جستجو جهت یافتن مشکلات احتمالی است تا مجبور نباشید هر شیء ضربه‌ای را به صورت دستی بررسی کنید.</p><h3>رابط گرافیکی MaiMod</h3>
برای اجرای رابط وب MaiMod، باید Mapperatorinator را نصب کنید.
سپس اسکریپت <code>mai_mod_ui.py</code> را اجرا کنید. این کار یک وب سرور محلی راه‌اندازی کرده و رابط کاربری را به طور خودکار در یک پنجره جدید باز می‌کند:</p><pre><code class="language-sh">python mai_mod_ui.py</code></pre>
<img width="850" height="1019" alt="afbeelding" src="https://github.com/user-attachments/assets/67c03a43-a7bd-4265-a5b1-5e4d62aca1fa" /></p><h2>نمای کلی</h2></p><h3>توکنیزاسیون</h3></p><p>Mapperatorinator نقشه‌های osu! را به یک نمایش رویدادی واسط تبدیل می‌کند که می‌تواند مستقیماً به توکن‌ها تبدیل شود و بالعکس.
این شامل آبجکت‌های ضربه، صدای ضربه‌ها، سرعت اسلایدرها، کمبوهای جدید، نقاط زمانی، زمان‌های kiai و سرعت اسکرول taiko/mania است.</p><p>در اینجا یک مثال کوچک از فرآیند توکنیزاسیون آمده است:</p><p><img src="https://github.com/user-attachments/assets/84efde76-4c27-48a1-b8ce-beceddd9e695" alt="mapperatorinator_parser"></p><p>برای صرفه‌جویی در اندازه واژگان، رویدادهای زمانی به بازه‌های ۱۰ میلی‌ثانیه‌ای و مختصات موقعیت به نقاط شبکه‌ای ۳۲ پیکسلی کوانتیزه می‌شوند.</p><h3>معماری مدل</h3>
مدل اساساً یک لایه روی مدل <a href="https://huggingface.co/docs/transformers/en/model_doc/whisper#transformers.WhisperForConditionalGeneration" target="_blank" rel="noopener noreferrer">HF Transformers Whisper</a> است، با جاسازی‌های ورودی و تابع زیان سفارشی.
اندازه مدل برابر با ۲۱۹ میلیون پارامتر است.
این مدل نسبت به T5 برای این وظیفه سریع‌تر و دقیق‌تر ارزیابی شد.</p><p>نمای کلی سطح بالا از ورودی-خروجی مدل به شرح زیر است:</p><p><img src="https://user-images.githubusercontent.com/28675590/201044116-1384ad72-c540-44db-a285-7319dd01caad.svg" alt="Picture2"></p><p>مدل از فریم‌های اسپکتروگرام مل به عنوان ورودی رمزگذار استفاده می‌کند، با یک فریم برای هر موقعیت ورودی. خروجی رمزگشای مدل در هر گام یک توزیع softmax روی یک واژگان گسسته و از پیش تعریف شده از رویدادها است. خروجی‌ها پراکنده هستند، رویدادها فقط زمانی نیاز هستند که یک آبجکت ضربه رخ دهد، به جای نشانه‌گذاری هر فریم صوتی.</p><h3>قالب آموزش چندوظیفه‌ای</h3></p><p><img src="https://github.com/user-attachments/assets/62f490bc-a567-4671-a7ce-dbcc5f9cd6d9" alt="Multitask training format"></p><p>قبل از توکن SOS، توکن‌های اضافی وجود دارند که تولید شرطی را تسهیل می‌کنند. این توکن‌ها شامل حالت بازی، سختی، شناسه سازنده، سال و سایر اطلاعات متا هستند.
در طول آموزش، این توکن‌ها برچسب همراه ندارند، بنابراین هیچ‌گاه توسط مدل تولید نمی‌شوند.
همچنین در طول آموزش، احتمال تصادفی وجود دارد که یک توکن متادیتا با یک توکن «ناشناخته» جایگزین شود، تا هنگام استنتاج بتوانیم از این توکن‌های «ناشناخته» برای کاهش اطلاعات مورد نیاز مدل استفاده کنیم.</p><h3>تولید بی‌وقفه طولانی</h3></p><p>طول زمینه مدل برابر با ۸.۱۹۲ ثانیه است. این واضحاً برای تولید کامل یک beatmap کافی نیست، بنابراین باید آهنگ را به چندین پنجره تقسیم کنیم و beatmap را در بخش‌های کوچک تولید کنیم.
برای اطمینان از اینکه beatmap تولید شده در بین پنجره‌ها درز قابل‌توجهی ندارد، از همپوشانی ۹۰٪ استفاده می‌کنیم و پنجره‌ها را به صورت متوالی تولید می‌کنیم.
هر پنجره تولید به جز اولی با رمزگشا که تا ۵۰٪ پنجره تولید با توکن‌های پنجره قبلی پر شده شروع می‌شود.</p><p>ما از یک پردازشگر لاجیت برای اطمینان از اینکه مدل نتواند توکن‌های زمانی را که در ۵۰٪ اول پنجره تولید قرار دارند، تولید کند استفاده می‌کنیم.
علاوه بر این، ۴۰٪ انتهایی پنجره تولید برای پنجره بعدی رزرو شده است. هر توکن زمانی تولید شده در این بازه به عنوان توکن EOS در نظر گرفته می‌شود.
این کار تضمین می‌کند که هر توکن تولید شده حداقل بر اساس ۴ ثانیه توکن قبلی و ۳.۳ ثانیه صدای آینده شرطی شده است تا پیش‌بینی انجام دهد.</p><p>برای جلوگیری از رانش آفست در طول تولیدات طولانی، آفست‌های تصادفی به رویدادهای زمانی در دیکودر در طول آموزش اضافه شده‌اند.
این باعث می‌شود مدل به جای تکیه بر زمان‌بندی دقیق، با گوش دادن به آغازها در صوت، خطاهای زمانی را اصلاح کند و نتیجه آن آفست دقیق و پایدار است.</p><h3>مختصات پالایش‌شده با دیفیوژن</h3></p><p>مختصات مکانی تولید شده توسط دیکودر به شبکه‌ای با گام ۳۲ پیکسل کوانتیده می‌شوند، بنابراین بعد از آن از دیفیوژن برای رفع نویز مختصات تا موقعیت نهایی استفاده می‌کنیم.
برای این منظور نسخه‌ای اصلاح‌شده از <a href="https://github.com/OliBomby/osu-diffusion" target="_blank" rel="noopener noreferrer">osu-diffusion</a> را آموزش داده‌ایم که به طور ویژه برای ۱۰٪ انتهایی برنامه نویز تخصصی شده و توکن‌های متادیتای پیشرفته‌تر Mapperatorinator را برای تولید شرطی می‌پذیرد.</p><p>از آنجا که مدل Mapperatorinator مقدار SV اسلایدرها را خروجی می‌دهد، طول مورد نیاز اسلایدر صرف‌نظر از شکل مسیر نقطه کنترلی ثابت است.
بنابراین تلاش می‌کنیم فرآیند دیفیوژن را برای تولید مختصاتی که با طول اسلایدر مورد نیاز مطابقت دارند هدایت کنیم.
این کار را با محاسبه مجدد موقعیت انتهایی اسلایدر پس از هر گام فرآیند دیفیوژن بر اساس طول مورد نیاز و مسیر فعلی نقاط کنترلی انجام می‌دهیم.
این به این معناست که فرآیند دیفیوژن کنترل مستقیم بر موقعیت انتهایی اسلایدر ندارد، اما هنوز می‌تواند با تغییر مسیر نقاط کنترلی بر آن تأثیر بگذارد.</p><h3>پس‌پردازش</h3></p><p>Mapperatorinator برخی پس‌پردازش‌های اضافی برای بهبود کیفیت بیت‌مپ تولید شده انجام می‌دهد:</p><ul><li>پالایش مختصات مکانی با دیفیوژن.</li>
<li>اسنپ کردن رویدادهای زمانی به نزدیک‌ترین تیک با استفاده از تقسیم‌کننده‌های اسنپ تولید شده توسط مدل.</li>
<li>اسنپ کردن هم‌پوشانی‌های مکانی تقریبا کامل.</li>
<li>تبدیل رویدادهای ستون مانیا به مختصات X.</li>
<li>تولید مسیر اسلایدر برای طبل‌نوازی‌های تایکو.</li>
<li>رفع اختلافات بزرگ بین طول مورد نیاز اسلایدر و طول مسیر نقطه کنترلی.</li></p><p></ul><h3>تولیدکننده سوپرتایمینگ</h3></p><p>تولیدکننده سوپرتایمینگ الگوریتمی است که دقت و صحت زمان‌بندی تولید شده را با استنتاج زمان‌بندی کل آهنگ به مدت ۲۰ بار و میانگین‌گیری نتایج افزایش می‌دهد.
این برای آهنگ‌هایی با BPM متغیر یا آهنگ‌هایی با تغییر BPM مفید است. نتیجه تقریباً بی‌نقص است و فقط گاهی بخشی نیاز به اصلاح دستی دارد.</p><h2>آموزش</h2></p><p>دستورالعمل زیر یک محیط آموزشی روی سیستم محلی شما ایجاد می‌کند.</p><h3>۱. کلون کردن مخزن</h3></p><pre><code class="language-sh">git clone https://github.com/OliBomby/Mapperatorinator.git
cd Mapperatorinator</code></pre></p><h3>۲. ایجاد دیتاست</h3></p><p>دیتاست خود را با استفاده از <a href="https://github.com/mappingtools/Mapperator/blob/master/README.md#create-a-high-quality-dataset" target="_blank" rel="noopener noreferrer">برنامه کنسولی Mapperator</a> ایجاد کنید. این کار نیاز به یک <a href="https://osu.ppy.sh/home/account/edit" target="_blank" rel="noopener noreferrer">توکن OAuth کلاینت osu!</a> برای تأیید بیت‌مپ‌ها و دریافت متادیتای اضافی دارد. دیتاست را در یک پوشه به نام <code>datasets</code> در کنار دایرکتوری <code>Mapperatorinator</code> قرار دهید.</p><pre><code class="language-sh">Mapperator.ConsoleApp.exe dataset2 -t "/Mapperatorinator/datasets/beatmap_descriptors.csv" -i "path/to/osz/files" -o "/datasets/cool_dataset"</code></pre></p><h3>3. (اختیاری) راه‌اندازی Weight & Biases برای ثبت گزارش‌ها</h3>
یک حساب کاربری در <a href="https://wandb.ai/site" target="_blank" rel="noopener noreferrer">Weight & Biases</a> بسازید و کلید API خود را از تنظیمات حساب دریافت کنید.
سپس متغیر محیطی <code>WANDB_API_KEY</code> را تنظیم کنید تا فرآیند آموزش بداند به این کلید گزارش بدهد.</p><pre><code class="language-sh">export WANDB_API_KEY=<your_api_key></code></pre></p><h3>4. ساخت کانتینر داکر</h3>
آموزش در محیط venv شما نیز ممکن است، اما ما استفاده از Docker بر روی WSL را برای عملکرد بهتر توصیه می‌کنیم.
<pre><code class="language-sh">docker compose up -d --force-recreate
docker attach mapperatorinator_space
cd Mapperatorinator</code></pre>
<h3>۵. پیکربندی پارامترها و شروع آموزش</h3></p><p>تمام تنظیمات در فایل <code>./configs/train/default.yaml</code> قرار دارند.
اطمینان حاصل کنید که <code>train_dataset_path</code> و <code>test_dataset_path</code> را مطابق با مسیر دیتاست خود، و همچنین اندیس‌های شروع و پایان مجموعه نقشه‌ها برای تقسیم آموزش/آزمون به درستی تنظیم کنید.
این مسیر مربوط به داخل کانتینر داکر است، بنابراین اگر دیتاست خود با نام <code>cool_dataset</code> را در دایرکتوری <code>datasets</code> قرار داده‌اید، مسیر باید <code>/workspace/datasets/cool_dataset</code> باشد.</p><p>توصیه می‌کنم یک فایل پیکربندی سفارشی بسازید که مقادیر پیش‌فرض را بازنویسی کند تا برای بازتولیدپذیری، رکوردی از پیکربندی آموزش خود داشته باشید.</p><pre><code class="language-yaml">data:
  train_dataset_path: "/workspace/datasets/cool_dataset"
  test_dataset_path: "/workspace/datasets/cool_dataset"
  train_dataset_start: 0
  train_dataset_end: 90
  test_dataset_start: 90
  test_dataset_end: 100</code></pre></p><p>Begin training by calling <code>python osuT5/train.py</code> or <code>torchrun --nproc_per_node=NUM_GPUS osuT5/train.py</code> for multi-GPU training.</p><pre><code class="language-sh">python osuT5/train.py -cn train_v29 train_dataset_path="/workspace/datasets/cool_dataset" test_dataset_path="/workspace/datasets/cool_dataset" train_dataset_end=90 test_dataset_start=90 test_dataset_end=100</code></pre></p><h3>۶. ریزتنظیم با LoRA</h3></p><p>شما همچنین می‌توانید یک مدل از پیش آموزش‌دیده را با <a href="https://arxiv.org/abs/2106.09685" target="_blank" rel="noopener noreferrer">LoRA</a> به منظور سازگار کردن آن با یک سبک یا حالت بازی خاص، ریزتنظیم کنید.
برای انجام این کار، فایل <code>configs/train/lora.yaml</code> را مطابق نیاز خود تغییر دهید و پیکربندی آموزش <code>lora</code> را اجرا کنید:</p><pre><code class="language-sh">python osuT5/train.py -cn lora train_dataset_path="/workspace/datasets/cool_dataset" test_dataset_path="/workspace/datasets/cool_dataset" train_dataset_end=90 test_dataset_start=90 test_dataset_end=100</code></pre></p><p>پارامترهای مهم LoRA که باید مد نظر قرار دهید:
<ul><li><code>pretrained_path</code>: مسیر یا مخزن HF مدل پایه برای تنظیم دقیق.</li>
<li><code>r</code>: رتبه ماتریس‌های LoRA. مقادیر بالاتر ظرفیت مدل را افزایش می‌دهد اما مصرف حافظه نیز بیشتر می‌شود.</li>
<li><code>lora_alpha</code>: ضریب مقیاس‌دهی برای به‌روزرسانی‌های LoRA.</li>
<li><code>total_steps</code>: تعداد کل مراحل آموزش. این مقدار را با توجه به اندازه دیتاست خود متعادل کنید.</li>
<li><code>enable_lora</code>: مشخص می‌کند که از LoRA یا تنظیم دقیق کامل مدل استفاده شود.</li></p><p></ul>در هنگام استنتاج، می‌توانید وزن‌های LoRA مورد نظر را با آرگومان <code>lora_path</code> تعیین کنید.
این مسیر می‌تواند محلی یا یک مخزن Hugging Face باشد.</p><h2>همچنین ببینید</h2>
<ul><li><a href="https://raw.githubusercontent.com/OliBomby/Mapperatorinator/main/./classifier/README.md" target="_blank" rel="noopener noreferrer">کلاس دسته‌بندی Mapper</a></li>
<li><a href="https://raw.githubusercontent.com/OliBomby/Mapperatorinator/main/./rcomplexion/README.md" target="_blank" rel="noopener noreferrer">RComplexion</a></li></p><p></ul><h2>اعتبارات</h2></p><p>تشکر ویژه از:
<ul><li>نویسندگان <a href="https://github.com/gyataro/osuT5" target="_blank" rel="noopener noreferrer">osuT5</a> برای کد آموزش آن‌ها.</li>
<li>تیم Hugging Face برای <a href="https://huggingface.co/docs/transformers/index" target="_blank" rel="noopener noreferrer">ابزارها</a>ی آن‌ها.</li>
<li><a href="https://github.com/jaswon" target="_blank" rel="noopener noreferrer">Jason Won</a> و <a href="https://github.com/sedthh" target="_blank" rel="noopener noreferrer">Richard Nagyfi</a> برای تبادل ایده‌ها.</li>
<li><a href="https://github.com/minetoblend" target="_blank" rel="noopener noreferrer">Marvin</a> برای اهدا اعتبار آموزش.</li>
<li>جامعه osu! برای beatmapها.</li></p><p></ul><h2>آثار مرتبط</h2></p><ul><li><a href="https://github.com/Syps/osu_beatmap_generator" target="_blank" rel="noopener noreferrer">تولیدکننده Beatmap برای osu!</a> توسط Syps (Nick Sypteras)</li>
<li><a href="https://github.com/kotritrona/osumapper" target="_blank" rel="noopener noreferrer">osumapper</a> توسط kotritrona، jyvden، Yoyolick (Ryan Zmuda)</li>
<li><a href="https://github.com/OliBomby/osu-diffusion" target="_blank" rel="noopener noreferrer">osu-diffusion</a> توسط OliBomby (Olivier Schipper)، NiceAesth (Andrei Baciu)</li>
<li><a href="https://github.com/gyataro/osuT5" target="_blank" rel="noopener noreferrer">osuT5</a> توسط gyataro (Xiwen Teoh)</li>
<li><a href="https://github.com/sedthh/BeatLearning" target="_blank" rel="noopener noreferrer">Beat Learning</a> توسط sedthh (Richard Nagyfi)</li>
<li><a href="https://github.com/jaswon/osu-dreamer" target="_blank" rel="noopener noreferrer">osu!dreamer</a> توسط jaswon (Jason Won)</li></p><p>
</ul>---

Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">Open Ai Tx</a> | Last indexed: 2026-01-24

---</p>
        </div>
        
        <div class="original-link">
            <strong>Original README:</strong> <a href="https://raw.githubusercontent.com/OliBomby/Mapperatorinator/main/README.md" target="_blank" rel="noopener noreferrer">View on GitHub</a>
        </div>
    </div>
    
    <div class="footer">
        <p>Translated by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">OpenAiTx</a> | 
        Last updated: 2026-01-24 
    </div>
    
</body>
</html>