<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapperatorinator - Một framework AI để tạo v&#224; chỉnh sửa beatmap osu! cho tất cả c&#225;c chế độ chơi từ dữ liệu spectrogram.</title>
    <meta name="description" content="Một framework AI để tạo v&#224; chỉnh sửa beatmap osu! cho tất cả c&#225;c chế độ chơi từ dữ liệu spectrogram.">
    <meta name="keywords" content="Mapperatorinator, Vietnamese, documentation, GitHub, open source">
    <meta name="author" content="OpenAiTx">
    <meta name="robots" content="index, follow">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "Mapperatorinator",
  "description": "Một framework AI để tạo và chỉnh sửa beatmap osu! cho tất cả các chế độ chơi từ dữ liệu spectrogram.",
  "author": {
    "@type": "Person",
    "name": "OliBomby"
  },
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "5",
    "ratingCount": 398
  },
  "url": "https://OpenAiTx.github.io/projects/OliBomby/Mapperatorinator/README-vi.html",
  "sameAs": "https://raw.githubusercontent.com/OliBomby/Mapperatorinator/main/README.md",
  "datePublished": "2026-01-24",
  "dateModified": "2026-01-24"
}
    </script>
    
    <!-- GitHub-style CSS -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #24292e;
            background-color: #ffffff;
            max-width: 980px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .container {
            background: #ffffff;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 24px;
            margin-bottom: 20px;
        }
        
        .header {
            border-bottom: 1px solid #e1e4e8;
            padding-bottom: 16px;
            margin-bottom: 24px;
        }
        
        .project-title {
            font-size: 2em;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .project-title a {
            color: #24292e;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: color 0.2s ease;
        }
        
        .project-title a:hover {
            color: #0366d6;
            text-decoration: none;
        }
        
        .project-title .github-icon {
            width: 1em;
            height: 1em;
            fill: currentColor;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }
        
        .project-title a:hover .github-icon {
            opacity: 1;
        }
        
        .project-meta {
            color: #586069;
            font-size: 14px;
            margin-bottom: 16px;
        }
        
        .stars {
            display: inline-block;
            margin-right: 16px;
        }
        
        .language {
            display: inline-block;
            background-color: #f1f8ff;
            color: #0366d6;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .content {
            font-size: 16px;
            line-height: 1.6;
        }
        
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
            color: #24292e;
        }
        
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        
        p {
            margin-bottom: 16px;
        }
        
        code {
            background-color: #f6f8fa;
            border-radius: 3px;
            font-size: 85%;
            margin: 0;
            padding: 0.2em 0.4em;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        }
        
        pre {
            background-color: #f6f8fa;
            border-radius: 6px;
            font-size: 85%;
            line-height: 1.45;
            overflow: auto;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        pre code {
            background-color: transparent;
            border: 0;
            display: inline;
            line-height: inherit;
            margin: 0;
            overflow: visible;
            padding: 0;
            word-wrap: normal;
        }
        
        a {
            color: #0366d6;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        ul, ol {
            margin-bottom: 16px;
            padding-left: 2em;
        }
        
        li {
            margin-bottom: 0.25em;
        }
        
        blockquote {
            border-left: 4px solid #dfe2e5;
            color: #6a737d;
            margin: 0 0 16px 0;
            padding: 0 1em;
        }
        
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e1e4e8;
            color: #586069;
            font-size: 14px;
            text-align: center;
        }
        
        .footer a {
            color: #0366d6;
        }
        
        .original-link {
            margin-top: 16px;
            padding: 12px;
            background-color: #f6f8fa;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 16px;
            }
            
            .project-title {
                font-size: 1.5em;
            }
        }
    </style>
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <!-- Bing Count -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sh95yd6uwt");
    </script>        

    <!-- Statcounter -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>    
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="project-title">
                <a href="https://github.com/OliBomby/Mapperatorinator" target="_blank" rel="noopener noreferrer">
                    <svg class="github-icon" viewBox="0 0 16 16" aria-hidden="true">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                    Mapperatorinator
                </a>
            </h1>
            <div class="project-meta">
                <span class="stars">⭐ 398 stars</span>
                <span class="language">Vietnamese</span>
                <span>by OliBomby</span>
            </div>
        </div>
        
        <div class="content">
            <p>
<div align="right">
  <details>
    <summary >🌐 Ngôn ngữ</summary>
    <div>
      <div align="center">
        <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=en">English</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=zh-CN">简体中文</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=zh-TW">繁體中文</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=ja">日本語</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=ko">한국어</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=hi">हिन्दी</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=th">ไทย</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=fr">Français</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=de">Deutsch</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=es">Español</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=it">Italiano</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=ru">Русский</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=pt">Português</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=nl">Nederlands</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=pl">Polski</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=ar">العربية</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=fa">فارسی</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=tr">Türkçe</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=vi">Tiếng Việt</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=id">Bahasa Indonesia</a>
        | <a href="https://openaitx.github.io/view.html?user=OliBomby&project=Mapperatorinator&lang=as">অসমীয়া</
      </div>
    </div>
  </details>
</div></p><h1>Mapperatorinator</h1></p><p>Hãy thử mô hình sinh <a href="https://colab.research.google.com/github/OliBomby/Mapperatorinator/blob/main/colab/mapperatorinator_inference.ipynb" target="_blank" rel="noopener noreferrer">tại đây</a>, hoặc MaiMod <a href="https://colab.research.google.com/github/OliBomby/Mapperatorinator/blob/main/colab/mai_mod_inference.ipynb" target="_blank" rel="noopener noreferrer">tại đây</a>. Xem video trình diễn <a href="https://youtu.be/FEr7t1L2EoA" target="_blank" rel="noopener noreferrer">tại đây</a>.</p><p>Mapperatorinator là một framework đa mô hình sử dụng đầu vào spectrogram để tạo ra beatmap osu! hoàn chỉnh cho tất cả chế độ chơi và <a href="#maimod-the-ai-driven-modding-tool" target="_blank" rel="noopener noreferrer">hỗ trợ modding beatmap</a>.
Mục tiêu của dự án này là tự động tạo ra các beatmap osu! đạt chất lượng xếp hạng từ bất kỳ bài hát nào với mức độ tùy biến cao.</p><p>Dự án này được xây dựng dựa trên <a href="https://github.com/gyataro/osuT5" target="_blank" rel="noopener noreferrer">osuT5</a> và <a href="https://github.com/OliBomby/osu-diffusion" target="_blank" rel="noopener noreferrer">osu-diffusion</a>. Khi phát triển dự án này, tôi đã sử dụng khoảng 2500 giờ tính toán GPU trên 142 lượt chạy bằng 4060 Ti của tôi và thuê các máy 4090 trên vast.ai.</p><p>#### Sử dụng công cụ này một cách có trách nhiệm. Luôn thông báo việc sử dụng AI trong các beatmap của bạn.</p><h2>Cài đặt</h2></p><p>Hướng dẫn dưới đây cho phép bạn tạo beatmap trên máy tính cá nhân, ngoài ra bạn cũng có thể chạy nó trên đám mây với <a href="https://colab.research.google.com/github/OliBomby/Mapperatorinator/blob/main/colab/mapperatorinator_inference.ipynb" target="_blank" rel="noopener noreferrer">colab notebook</a>.</p><h3>1. Sao chép kho lưu trữ</h3></p><pre><code class="language-sh">git clone https://github.com/OliBomby/Mapperatorinator.git
cd Mapperatorinator</code></pre></p><h3>2. (Tùy chọn) Tạo môi trường ảo</h3></p><p>Sử dụng Python 3.10, các phiên bản sau có thể không tương thích với các thư viện phụ thuộc.</p><pre><code class="language-sh">python -m venv .venv</p><h1>In cmd.exe</h1>
.venv\Scripts\activate.bat
<h1>In PowerShell</h1>
.venv\Scripts\Activate.ps1
<h1>In Linux or MacOS</h1>
source .venv/bin/activate</code></pre></p><h3>3. Cài đặt các phụ thuộc</h3></p><ul><li>Python 3.10</li>
<li><a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">Git</a></li>
<li><a href="http://www.ffmpeg.org/" target="_blank" rel="noopener noreferrer">ffmpeg</a></li>
<li><a href="https://developer.nvidia.com/cuda-zone" target="_blank" rel="noopener noreferrer">CUDA</a> (Dành cho GPU NVIDIA) hoặc <a href="https://rocmdocs.amd.com/en/latest/Installation_Guide/Installation-Guide.html" target="_blank" rel="noopener noreferrer">ROCm</a> (Dành cho GPU AMD trên linux)</li>
<li><a href="https://pytorch.org/get-started/locally/" target="_blank" rel="noopener noreferrer">PyTorch</a>: Đảm bảo làm theo hướng dẫn Bắt đầu để cài đặt <code>torch</code> và <code>torchaudio</code> với hỗ trợ GPU. Hãy chọn đúng phiên bản Compute Platform mà bạn đã cài đặt ở bước trước.</li></p><p><li>và các phụ thuộc Python còn lại:</li></p><p></ul><pre><code class="language-sh">pip install -r requirements.txt</code></pre></p><h2>Giao diện Web (Khuyến nghị)</h2></p><p>Để có trải nghiệm thân thiện với người dùng hơn, hãy cân nhắc sử dụng Giao diện Web. Nó cung cấp giao diện đồ họa để cấu hình các tham số sinh, khởi động quá trình và giám sát kết quả.</p><h3>Khởi động GUI</h3></p><p>Di chuyển đến thư mục <code>Mapperatorinator</code> đã được nhân bản trong terminal của bạn và chạy:</p><pre><code class="language-sh">python web-ui.py</code></pre>
Điều này sẽ khởi động một máy chủ web cục bộ và tự động mở giao diện người dùng trong một cửa sổ mới.</p><h3>Sử dụng Giao Diện Đồ Họa (GUI)</h3></p><ul><li><strong>Cấu hình:</strong> Đặt đường dẫn đầu vào/đầu ra bằng các trường biểu mẫu và nút "Duyệt". Điều chỉnh các tham số tạo như chế độ chơi, độ khó, phong cách (năm, ID mapper, mô tả), thời gian, các tính năng cụ thể (hitsounds, super timing), và nhiều hơn nữa, phản ánh các tùy chọn dòng lệnh. (Lưu ý: Nếu bạn cung cấp một <code>beatmap_path</code>, giao diện sẽ tự động xác định <code>audio_path</code> và <code>output_path</code> từ đó, vì vậy bạn có thể để trống các trường này)</li>
<li><strong>Bắt đầu:</strong> Nhấn nút "Bắt đầu suy luận" để khởi động quá trình tạo beatmap.</li>
<li><strong>Hủy:</strong> Bạn có thể dừng quá trình đang chạy bằng nút "Hủy suy luận".</li>
<li><strong>Mở đầu ra:</strong> Khi hoàn tất, sử dụng nút "Mở thư mục đầu ra" để truy cập nhanh các tệp đã tạo.</li></p><p></ul>Giao diện Web UI hoạt động như một lớp bao tiện lợi quanh script <code>inference.py</code>. Để sử dụng các tùy chọn nâng cao hoặc xử lý sự cố, hãy tham khảo hướng dẫn dòng lệnh.</p><p><img src="https://github.com/user-attachments/assets/5312a45f-d51c-4b37-9389-da3258ddd0a1" alt="python_u3zyW0S3Vs"></p><h2>Suy luận bằng dòng lệnh</h2></p><p>Dành cho người dùng thích sử dụng dòng lệnh hoặc cần truy cập vào các cấu hình nâng cao, hãy làm theo các bước dưới đây. <strong>Lưu ý:</strong> Để giao diện đồ họa đơn giản hơn, vui lòng xem phần <a href="#web-ui-recommended" target="_blank" rel="noopener noreferrer">Web UI (Khuyến nghị)</a> ở trên.</p><p>Chạy <code>inference.py</code> và truyền vào một số đối số để tạo beatmap. Đối với trường hợp này, sử dụng <a href="https://hydra.cc/docs/advanced/override_grammar/basic/" target="_blank" rel="noopener noreferrer">cú pháp ghi đè Hydra</a>. Xem <code>configs/inference_v29.yaml</code> để biết tất cả các tham số có sẵn.</p><pre><code class="language-">python inference.py \
  audio_path           [Path to input audio] \
  output_path          [Path to output directory] \
  beatmap_path         [Path to .osu file to autofill metadata, and output_path, or use as reference] \
  
  gamemode             [Game mode to generate 0=std, 1=taiko, 2=ctb, 3=mania] \
  difficulty           [Difficulty star rating to generate] \
  mapper_id            [Mapper user ID for style] \
  year                 [Upload year to simulate] \
  hitsounded           [Whether to add hitsounds] \
  slider_multiplier    [Slider velocity multiplier] \
  circle_size          [Circle size] \
  keycount             [Key count for mania] \
  hold_note_ratio      [Hold note ratio for mania 0-1] \
  scroll_speed_ratio   [Scroll speed ratio for mania and ctb 0-1] \
  descriptors          [List of beatmap user tags for style] \
  negative_descriptors [List of beatmap user tags for classifier-free guidance] \
  
  add_to_beatmap       [Whether to add generated content to the reference beatmap instead of making a new beatmap] \
  start_time           [Generation start time in milliseconds] \
  end_time             [Generation end time in milliseconds] \
  in_context           [List of additional context to provide to the model [NONE,TIMING,KIAI,MAP,GD,NO_HS]] \
  output_type          [List of content types to generate] \
  cfg_scale            [Scale of the classifier-free guidance] \
  super_timing         [Whether to use slow accurate variable BPM timing generator] \
  seed                 [Random seed for generation] \</code></pre></p><p>Ví dụ:
<pre><code class="language-">python inference.py beatmap_path="'C:\Users\USER\AppData\Local\osu!\Songs\1 Kenji Ninuma - DISCO PRINCE\Kenji Ninuma - DISCOPRINCE (peppy) [Normal].osu'" gamemode=0 difficulty=5.5 year=2023 descriptors="['jump aim','clean']" in_context=[TIMING,KIAI]</code></pre></p><h2>CLI Tương Tác</h2>
Đối với những người thích làm việc trên terminal nhưng muốn được hướng dẫn thiết lập, script CLI tương tác là một lựa chọn tuyệt vời thay thế cho giao diện Web.</p><h3>Khởi động CLI</h3>
Di chuyển đến thư mục đã được nhân bản. Bạn có thể cần phải cấp quyền thực thi cho script trước.</p><pre><code class="language-sh"># Make the script executable (only needs to be done once)
chmod +x cli_inference.sh</code></pre></p><pre><code class="language-sh"># Run the script
./cli_inference.sh</code></pre></p><h3>Sử dụng CLI</h3>
Script sẽ hướng dẫn bạn qua một loạt các câu hỏi để cấu hình tất cả các tham số sinh, giống như giao diện Web.</p><p>Nó sử dụng giao diện mã màu để dễ nhận biết.
Nó cung cấp menu chọn nhiều nâng cao để chọn các mô tả phong cách bằng phím mũi tên và phím cách.
Sau khi bạn trả lời tất cả các câu hỏi, nó sẽ hiển thị lệnh cuối cùng để bạn xem lại.
Bạn có thể xác nhận để thực thi trực tiếp hoặc hủy và sao chép lệnh để sử dụng thủ công.</p><h2>Mẹo Sinh Dữ Liệu</h2></p><ul><li>Bạn có thể chỉnh sửa <code>configs/inference_v29.yaml</code> và thêm các tham số của mình ở đó thay vì nhập chúng vào terminal mỗi lần.</li>
<li>Tất cả các mô tả có sẵn có thể được tìm thấy <a href="https://osu.ppy.sh/wiki/en/Beatmap/Beatmap_tags" target="_blank" rel="noopener noreferrer">ở đây</a>.</li>
<li>Luôn cung cấp tham số năm trong khoảng từ 2007 đến 2023. Nếu bạn để trống, mô hình có thể sinh ra kiểu không nhất quán.</li>
<li>Luôn cung cấp tham số độ khó. Nếu bạn để trống, mô hình có thể sinh ra độ khó không nhất quán.</li>
<li>Tăng tham số <code>cfg_scale</code> để tăng hiệu quả của các tham số <code>mapper_id</code> và <code>descriptors</code>.</li>
<li>Bạn có thể sử dụng tham số <code>negative_descriptors</code> để hướng mô hình tránh một số phong cách nhất định. Điều này chỉ hiệu quả khi <code>cfg_scale > 1</code>. Đảm bảo số lượng mô tả tiêu cực bằng với số lượng mô tả.</li>
<li>Nếu phong cách bài hát và phong cách beatmap mong muốn không phù hợp, mô hình có thể không theo đúng hướng dẫn của bạn. Ví dụ, rất khó để sinh beatmap SR cao, SV cao cho một bài hát nhẹ nhàng.</li>
<li>Nếu bạn đã có timing và kiai times cho bài hát, bạn có thể cung cấp cho mô hình để tăng tốc độ và độ chính xác suy luận: Sử dụng các tham số <code>beatmap_path</code> và <code>in_context=[TIMING,KIAI]</code>.</li>
<li>Để remap chỉ một phần của beatmap, sử dụng các tham số <code>beatmap_path</code>, <code>start_time</code>, <code>end_time</code>, và <code>add_to_beatmap=true</code>.</li>
<li>Để sinh độ khó guest cho beatmap, sử dụng các tham số <code>beatmap_path</code> và <code>in_context=[GD,TIMING,KIAI]</code>.</li>
<li>Để sinh hitsounds cho beatmap, sử dụng các tham số <code>beatmap_path</code> và <code>in_context=[NO_HS,TIMING,KIAI]</code>.</li>
<li>Để chỉ sinh timing cho bài hát, sử dụng các tham số <code>super_timing=true</code> và <code>output_type=[TIMING]</code>.</li></p><p></ul><h2>MaiMod: Công cụ Modding AI-driven</h2></p><p>MaiMod là công cụ modding cho beatmap osu! sử dụng dự đoán của Mapperatorinator để tìm các lỗi và sự không nhất quán tiềm ẩn mà các công cụ modding tự động khác như <a href="https://github.com/Naxesss/MapsetVerifier" target="_blank" rel="noopener noreferrer">Mapset Verifier</a> không thể phát hiện.
Nó có thể phát hiện các vấn đề như:
<ul><li>Snap hoặc mẫu nhịp điệu sai</li>
<li>Điểm thời gian không chính xác</li>
<li>Vị trí hit object hoặc đặt new combo không nhất quán</li>
<li>Hình dạng slider lạ</li>
<li>Hitsounds hoặc âm lượng không nhất quán</li></p><p></ul>Bạn có thể thử MaiMod <a href="https://colab.research.google.com/github/OliBomby/Mapperatorinator/blob/main/colab/mai_mod_inference.ipynb" target="_blank" rel="noopener noreferrer">tại đây</a>, hoặc chạy nó tại máy:
Để chạy MaiMod tại máy, bạn cần cài Mapperatorinator. Sau đó, chạy script <code>mai_mod.py</code>, chỉ định đường dẫn beatmap bằng tham số <code>beatmap_path</code>.
<pre><code class="language-sh">python mai_mod.py beatmap_path="'C:\Users\USER\AppData\Local\osu!\Songs\1 Kenji Ninuma - DISCO PRINCE\Kenji Ninuma - DISCOPRINCE (peppy) [Normal].osu'"</code></pre>
Điều này sẽ in các đề xuất modding lên bảng điều khiển, sau đó bạn có thể áp dụng chúng vào beatmap của mình một cách thủ công.
Các đề xuất được sắp xếp theo thứ tự thời gian và được nhóm thành các danh mục.
Giá trị đầu tiên trong vòng tròn chỉ ra 'surprisal', là thước đo mức độ bất ngờ mà mô hình nhận thấy vấn đề, vì vậy bạn có thể ưu tiên những vấn đề quan trọng nhất.</p><p>Mô hình có thể mắc lỗi, đặc biệt là với các vấn đề có surprisal thấp, vì vậy hãy luôn kiểm tra kỹ các đề xuất trước khi áp dụng chúng vào beatmap của bạn.
Mục tiêu chính là giúp bạn thu hẹp phạm vi tìm kiếm các vấn đề tiềm ẩn, để bạn không phải kiểm tra thủ công từng đối tượng hit trong beatmap của mình.</p><h3>MaiMod GUI</h3>
Để chạy MaiMod Web UI, bạn cần cài đặt Mapperatorinator.
Sau đó, chạy script <code>mai_mod_ui.py</code>. Điều này sẽ khởi động một máy chủ web cục bộ và tự động mở giao diện người dùng trong một cửa sổ mới:</p><pre><code class="language-sh">python mai_mod_ui.py</code></pre></p><p><img width="850" height="1019" alt="afbeelding" src="https://github.com/user-attachments/assets/67c03a43-a7bd-4265-a5b1-5e4d62aca1fa" /></p><h2>Tổng quan</h2></p><h3>Tokenization</h3></p><p>Mapperatorinator chuyển đổi beatmap của osu! thành một dạng trung gian của sự kiện, có thể chuyển đổi trực tiếp sang và từ các token.
Nó bao gồm các hit object, hitsound, vận tốc slider, combo mới, điểm thời gian, thời gian kiai, và tốc độ cuộn của taiko/mania.</p><p>Dưới đây là một ví dụ nhỏ về quá trình tokenization:</p><p><img src="https://github.com/user-attachments/assets/84efde76-4c27-48a1-b8ce-beceddd9e695" alt="mapperatorinator_parser"></p><p>Để tiết kiệm kích thước từ vựng, các sự kiện thời gian được lượng tử hóa theo khoảng 10ms và tọa độ vị trí được lượng tử hóa theo lưới điểm 32 pixel.</p><h3>Kiến trúc mô hình</h3>
Mô hình cơ bản là một lớp bao quanh <a href="https://huggingface.co/docs/transformers/en/model_doc/whisper#transformers.WhisperForConditionalGeneration" target="_blank" rel="noopener noreferrer">HF Transformers Whisper</a>, với embedding đầu vào và hàm loss tùy chỉnh.
Kích thước mô hình là 219 triệu tham số.
Mô hình này được tìm thấy nhanh hơn và chính xác hơn T5 cho tác vụ này.</p><p>Tổng quan ở cấp cao về input-output của mô hình như sau:</p><p><img src="https://user-images.githubusercontent.com/28675590/201044116-1384ad72-c540-44db-a285-7319dd01caad.svg" alt="Picture2"></p><p>Mô hình sử dụng các khung phổ Mel làm đầu vào encoder, với một khung cho mỗi vị trí đầu vào. Đầu ra decoder tại mỗi bước là một phân phối softmax trên một tập hợp từ vựng rời rạc, được xác định trước của các sự kiện. Đầu ra là thưa, chỉ cần sự kiện khi có hit-object, thay vì chú thích từng khung âm thanh.</p><h3>Định dạng huấn luyện đa tác vụ</h3></p><p><img src="https://github.com/user-attachments/assets/62f490bc-a567-4671-a7ce-dbcc5f9cd6d9" alt="Multitask training format"></p><p>Trước token SOS là các token bổ sung để hỗ trợ sinh có điều kiện. Những token này bao gồm chế độ chơi, độ khó, ID mapper, năm và các metadata khác.
Trong quá trình huấn luyện, các token này không có nhãn đi kèm nên chúng không bao giờ được mô hình xuất ra.
Ngoài ra trong huấn luyện, có xác suất ngẫu nhiên một token metadata sẽ bị thay thế bởi một token 'unknown', nên trong suy luận chúng ta có thể dùng các token 'unknown' này để giảm lượng metadata cần cung cấp cho mô hình.</p><h3>Sinh liên tục mượt mà</h3></p><p>Độ dài ngữ cảnh của mô hình là 8.192 giây. Rõ ràng là không đủ để tạo ra toàn bộ beatmap, do đó chúng ta phải chia bài hát thành nhiều cửa sổ và sinh beatmap thành từng phần nhỏ.
Để đảm bảo beatmap sinh ra không bị lộ ranh giới giữa các cửa sổ, chúng tôi sử dụng độ chồng lấn 90% và sinh các cửa sổ tuần tự.
Mỗi cửa sổ sinh (trừ cửa sổ đầu tiên) sẽ bắt đầu với decoder được điền trước đến 50% cửa sổ sinh bằng token từ các cửa sổ trước.
Chúng tôi sử dụng một bộ xử lý logit để đảm bảo rằng mô hình không thể sinh ra các token thời gian nằm trong 50% đầu tiên của cửa sổ sinh.
Ngoài ra, 40% cuối của cửa sổ sinh được dành cho cửa sổ tiếp theo. Bất kỳ token thời gian nào được sinh ra trong phạm vi đó sẽ được coi là token EOS.
Điều này đảm bảo rằng mỗi token được sinh ra đều được điều kiện hóa bởi ít nhất 4 giây token trước đó và 3,3 giây âm thanh tương lai để dự đoán.</p><p>Để ngăn trôi lệch offset trong quá trình sinh dài, các offset ngẫu nhiên đã được thêm vào các sự kiện thời gian trong decoder trong quá trình huấn luyện.
Điều này buộc nó phải sửa lỗi thời gian bằng cách lắng nghe các onset trong âm thanh thay vào đó, và kết quả là offset chính xác một cách nhất quán.</p><h3>Tọa độ tinh chỉnh với diffusion</h3></p><p>Tọa độ vị trí được sinh ra bởi decoder được lượng tử hóa thành các điểm lưới 32 pixel, vì vậy sau đó chúng tôi sử dụng diffusion để loại bỏ nhiễu tọa độ đến các vị trí cuối cùng.
Để làm điều này, chúng tôi đã huấn luyện một phiên bản sửa đổi của <a href="https://github.com/OliBomby/osu-diffusion" target="_blank" rel="noopener noreferrer">osu-diffusion</a> chuyên biệt chỉ cho 10% cuối của lịch trình nhiễu, và nhận các token metadata nâng cao hơn mà Mapperatorinator sử dụng cho sinh có điều kiện.</p><p>Vì mô hình Mapperatorinator xuất ra SV của sliders, chiều dài cần thiết của slider là cố định bất kể hình dạng đường đi của control point.
Do đó, chúng tôi cố gắng hướng quá trình diffusion để tạo ra các tọa độ phù hợp với chiều dài slider yêu cầu.
Chúng tôi thực hiện điều này bằng cách tính lại vị trí kết thúc slider sau mỗi bước của quá trình diffusion dựa trên chiều dài yêu cầu và đường đi control point hiện tại.
Điều này có nghĩa là quá trình diffusion không kiểm soát trực tiếp vị trí kết thúc slider, nhưng vẫn có thể ảnh hưởng đến chúng bằng cách thay đổi đường đi control point.</p><h3>Xử lý hậu kỳ</h3></p><p>Mapperatorinator thực hiện một số bước xử lý hậu kỳ bổ sung để nâng cao chất lượng beatmap được sinh ra:</p><ul><li>Tinh chỉnh tọa độ vị trí với diffusion.</li>
<li>Gắn lại các sự kiện thời gian vào tick gần nhất bằng cách sử dụng snap divisors do mô hình sinh ra.</li>
<li>Gắn kết các vị trí gần như trùng khớp.</li>
<li>Chuyển đổi các sự kiện cột mania thành tọa độ X.</li>
<li>Sinh đường slider cho taiko drumrolls.</li>
<li>Sửa các khác biệt lớn giữa chiều dài slider yêu cầu và chiều dài đường đi control point.</li></p><p></ul><h3>Bộ sinh timing siêu cấp</h3></p><p>Bộ sinh timing siêu cấp là một thuật toán cải thiện độ chính xác của timing được sinh ra bằng cách suy ra timing cho cả bài hát 20 lần và lấy trung bình kết quả.
Điều này hữu ích cho các bài hát có BPM thay đổi, hoặc các bài hát có thay đổi BPM. Kết quả gần như hoàn hảo, chỉ đôi khi có một đoạn cần chỉnh sửa thủ công.</p><h2>Huấn luyện</h2></p><p>Hướng dẫn bên dưới sẽ tạo môi trường huấn luyện trên máy cục bộ của bạn.</p><h3>1. Sao chép repository</h3></p><pre><code class="language-sh">git clone https://github.com/OliBomby/Mapperatorinator.git
cd Mapperatorinator</code></pre></p><h3>2. Tạo bộ dữ liệu</h3></p><p>Tạo bộ dữ liệu của riêng bạn bằng ứng dụng <a href="https://github.com/mappingtools/Mapperator/blob/master/README.md#create-a-high-quality-dataset" target="_blank" rel="noopener noreferrer">Mapperator console app</a>. Ứng dụng này yêu cầu một <a href="https://osu.ppy.sh/home/account/edit" target="_blank" rel="noopener noreferrer">osu! OAuth client token</a> để xác minh beatmaps và lấy thêm metadata. Đặt bộ dữ liệu vào thư mục <code>datasets</code> cạnh thư mục <code>Mapperatorinator</code>.</p><pre><code class="language-sh">Mapperator.ConsoleApp.exe dataset2 -t "/Mapperatorinator/datasets/beatmap_descriptors.csv" -i "path/to/osz/files" -o "/datasets/cool_dataset"</code></pre></p><h3>3. (Tùy chọn) Thiết lập Weight & Biases để ghi log</h3>
Tạo một tài khoản trên <a href="https://wandb.ai/site" target="_blank" rel="noopener noreferrer">Weight & Biases</a> và lấy khóa API từ phần cài đặt tài khoản của bạn.
Sau đó thiết lập biến môi trường <code>WANDB_API_KEY</code>, để quá trình huấn luyện biết ghi log vào khóa này.</p><pre><code class="language-sh">export WANDB_API_KEY=<your_api_key></code></pre></p><h3>4. Tạo container docker</h3>
Bạn cũng có thể huấn luyện trong venv của mình, nhưng chúng tôi khuyến nghị sử dụng Docker trên WSL để có hiệu suất tốt hơn.
<pre><code class="language-sh">docker compose up -d --force-recreate
docker attach mapperatorinator_space
cd Mapperatorinator</code></pre></p><h3>5. Cấu hình tham số và bắt đầu huấn luyện</h3></p><p>Tất cả các cấu hình nằm trong <code>./configs/train/default.yaml</code>.
Hãy đảm bảo thiết lập đúng <code>train_dataset_path</code> và <code>test_dataset_path</code> trỏ đến tập dữ liệu của bạn, cũng như chỉ số mapset bắt đầu và kết thúc cho phân chia huấn luyện/kiểm thử.
Đường dẫn là cục bộ trong container docker, vì vậy nếu bạn đặt tập dữ liệu tên là <code>cool_dataset</code> vào thư mục <code>datasets</code>, thì nó nên là <code>/workspace/datasets/cool_dataset</code>.</p><p>Tôi khuyên bạn nên tạo một file cấu hình tùy chỉnh ghi đè file cấu hình mặc định, để bạn có thể lưu lại cấu hình huấn luyện nhằm đảm bảo khả năng tái lập kết quả.</p><pre><code class="language-yaml">data:
  train_dataset_path: "/workspace/datasets/cool_dataset"
  test_dataset_path: "/workspace/datasets/cool_dataset"
  train_dataset_start: 0
  train_dataset_end: 90
  test_dataset_start: 90
  test_dataset_end: 100</code></pre></p><p>Begin training by calling <code>python osuT5/train.py</code> or <code>torchrun --nproc_per_node=NUM_GPUS osuT5/train.py</code> for multi-GPU training.</p><pre><code class="language-sh">python osuT5/train.py -cn train_v29 train_dataset_path="/workspace/datasets/cool_dataset" test_dataset_path="/workspace/datasets/cool_dataset" train_dataset_end=90 test_dataset_start=90 test_dataset_end=100</code></pre></p><h3>6. Tinh chỉnh LoRA</h3></p><p>Bạn cũng có thể tinh chỉnh một mô hình đã huấn luyện trước bằng <a href="https://arxiv.org/abs/2106.09685" target="_blank" rel="noopener noreferrer">LoRA</a> để thích ứng với một phong cách hoặc chế độ chơi cụ thể.
Để làm điều này, hãy điều chỉnh <code>configs/train/lora.yaml</code> theo nhu cầu của bạn và chạy cấu hình huấn luyện <code>lora</code>:</p><pre><code class="language-sh">python osuT5/train.py -cn lora train_dataset_path="/workspace/datasets/cool_dataset" test_dataset_path="/workspace/datasets/cool_dataset" train_dataset_end=90 test_dataset_start=90 test_dataset_end=100</code></pre></p><p>Các tham số LoRA quan trọng cần lưu ý:
<ul><li><code>pretrained_path</code>: Đường dẫn hoặc repo HF của mô hình gốc cần tinh chỉnh.</li>
<li><code>r</code>: Hạng của các ma trận LoRA. Giá trị cao hơn tăng khả năng mô hình nhưng cũng tăng sử dụng bộ nhớ.</li>
<li><code>lora_alpha</code>: Hệ số tỉ lệ cho các cập nhật LoRA.</li>
<li><code>total_steps</code>: Tổng số bước huấn luyện. Cân đối theo kích thước tập dữ liệu của bạn.</li>
<li><code>enable_lora</code>: Có sử dụng LoRA hay tinh chỉnh toàn bộ mô hình.</li></p><p></ul>Trong quá trình suy luận, bạn có thể chỉ định trọng số LoRA sử dụng với tham số <code>lora_path</code>.
Tham số này có thể là một đường dẫn cục bộ hoặc repo trên Hugging Face.</p><h2>Xem thêm</h2>
<ul><li><a href="https://raw.githubusercontent.com/OliBomby/Mapperatorinator/main/./classifier/README.md" target="_blank" rel="noopener noreferrer">Mapper Classifier</a></li>
<li><a href="https://raw.githubusercontent.com/OliBomby/Mapperatorinator/main/./rcomplexion/README.md" target="_blank" rel="noopener noreferrer">RComplexion</a></li></p><p></ul><h2>Ghi nhận</h2></p><p>Đặc biệt cảm ơn:
<ul><li>Các tác giả của <a href="https://github.com/gyataro/osuT5" target="_blank" rel="noopener noreferrer">osuT5</a> với mã huấn luyện của họ.</li>
<li>Nhóm Hugging Face với <a href="https://huggingface.co/docs/transformers/index" target="_blank" rel="noopener noreferrer">các công cụ</a>.</li>
<li><a href="https://github.com/jaswon" target="_blank" rel="noopener noreferrer">Jason Won</a> và <a href="https://github.com/sedthh" target="_blank" rel="noopener noreferrer">Richard Nagyfi</a> vì những ý tưởng đóng góp.</li>
<li><a href="https://github.com/minetoblend" target="_blank" rel="noopener noreferrer">Marvin</a> vì đã quyên góp tín dụng huấn luyện.</li>
<li>Cộng đồng osu! vì các beatmap.</li></p><p></ul><h2>Các công trình liên quan</h2></p><ul><li><a href="https://github.com/Syps/osu_beatmap_generator" target="_blank" rel="noopener noreferrer">osu! Beatmap Generator</a> của Syps (Nick Sypteras)</li>
<li><a href="https://github.com/kotritrona/osumapper" target="_blank" rel="noopener noreferrer">osumapper</a> của kotritrona, jyvden, Yoyolick (Ryan Zmuda)</li>
<li><a href="https://github.com/OliBomby/osu-diffusion" target="_blank" rel="noopener noreferrer">osu-diffusion</a> của OliBomby (Olivier Schipper), NiceAesth (Andrei Baciu)</li>
<li><a href="https://github.com/gyataro/osuT5" target="_blank" rel="noopener noreferrer">osuT5</a> của gyataro (Xiwen Teoh)</li>
<li><a href="https://github.com/sedthh/BeatLearning" target="_blank" rel="noopener noreferrer">Beat Learning</a> của sedthh (Richard Nagyfi)</li>
<li><a href="https://github.com/jaswon/osu-dreamer" target="_blank" rel="noopener noreferrer">osu!dreamer</a> của jaswon (Jason Won)</li></p><p>
</ul>---

Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">Open Ai Tx</a> | Last indexed: 2026-01-24

---</p>
        </div>
        
        <div class="original-link">
            <strong>Original README:</strong> <a href="https://raw.githubusercontent.com/OliBomby/Mapperatorinator/main/README.md" target="_blank" rel="noopener noreferrer">View on GitHub</a>
        </div>
    </div>
    
    <div class="footer">
        <p>Translated by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">OpenAiTx</a> | 
        Last updated: 2026-01-24 
    </div>
    
</body>
</html>