<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ofetch - Read ofetch documentation in Persian. This project has 4649 stars on GitHub.</title>
    <meta name="description" content="Read ofetch documentation in Persian. This project has 4649 stars on GitHub.">
    <meta name="keywords" content="ofetch, Persian, documentation, GitHub, open source">
    <meta name="author" content="OpenAiTx">
    <meta name="robots" content="index, follow">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "ofetch",
  "description": "Read ofetch documentation in Persian. This project has 4649 stars on GitHub.",
  "author": {
    "@type": "Person",
    "name": "unjs"
  },
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "5",
    "ratingCount": 4649
  },
  "url": "https://OpenAiTx.github.io/projects/unjs/ofetch/README-fa.html",
  "sameAs": "https://raw.githubusercontent.com/unjs/ofetch/main/README.md",
  "datePublished": "2025-07-24",
  "dateModified": "2025-07-24"
}
    </script>
    
    <!-- GitHub-style CSS -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #24292e;
            background-color: #ffffff;
            max-width: 980px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .container {
            background: #ffffff;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 24px;
            margin-bottom: 20px;
        }
        
        .header {
            border-bottom: 1px solid #e1e4e8;
            padding-bottom: 16px;
            margin-bottom: 24px;
        }
        
        .project-title {
            font-size: 2em;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .project-title a {
            color: #24292e;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: color 0.2s ease;
        }
        
        .project-title a:hover {
            color: #0366d6;
            text-decoration: none;
        }
        
        .project-title .github-icon {
            width: 1em;
            height: 1em;
            fill: currentColor;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }
        
        .project-title a:hover .github-icon {
            opacity: 1;
        }
        
        .project-meta {
            color: #586069;
            font-size: 14px;
            margin-bottom: 16px;
        }
        
        .stars {
            display: inline-block;
            margin-right: 16px;
        }
        
        .language {
            display: inline-block;
            background-color: #f1f8ff;
            color: #0366d6;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .content {
            font-size: 16px;
            line-height: 1.6;
        }
        
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
            color: #24292e;
        }
        
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        
        p {
            margin-bottom: 16px;
        }
        
        code {
            background-color: #f6f8fa;
            border-radius: 3px;
            font-size: 85%;
            margin: 0;
            padding: 0.2em 0.4em;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        }
        
        pre {
            background-color: #f6f8fa;
            border-radius: 6px;
            font-size: 85%;
            line-height: 1.45;
            overflow: auto;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        pre code {
            background-color: transparent;
            border: 0;
            display: inline;
            line-height: inherit;
            margin: 0;
            overflow: visible;
            padding: 0;
            word-wrap: normal;
        }
        
        a {
            color: #0366d6;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        ul, ol {
            margin-bottom: 16px;
            padding-left: 2em;
        }
        
        li {
            margin-bottom: 0.25em;
        }
        
        blockquote {
            border-left: 4px solid #dfe2e5;
            color: #6a737d;
            margin: 0 0 16px 0;
            padding: 0 1em;
        }
        
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e1e4e8;
            color: #586069;
            font-size: 14px;
            text-align: center;
        }
        
        .footer a {
            color: #0366d6;
        }
        
        .original-link {
            margin-top: 16px;
            padding: 12px;
            background-color: #f6f8fa;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 16px;
            }
            
            .project-title {
                font-size: 1.5em;
            }
        }
    </style>
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <!-- Bing Count -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sh95yd6uwt");
    </script>        

    <!-- Statcounter -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>    
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="project-title">
                <a href="https://github.com/unjs/ofetch" target="_blank" rel="noopener noreferrer">
                    <svg class="github-icon" viewBox="0 0 16 16" aria-hidden="true">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                    ofetch
                </a>
            </h1>
            <div class="project-meta">
                <span class="stars">⭐ 4649 stars</span>
                <span class="language">Persian</span>
                <span>by unjs</span>
            </div>
        </div>
        
        <div class="content">
            <h1>ofetch</h1></p><p>[![npm version][npm-version-src]][npm-version-href]
[![npm downloads][npm-downloads-src]][npm-downloads-href]
[![bundle][bundle-src]][bundle-href]
[![Codecov][codecov-src]][codecov-href]
[![License][license-src]][license-href]
[![JSDocs][jsdocs-src]][jsdocs-href]</p><p>یک API بهتر برای fetch. قابل استفاده در Node، مرورگر و Workerها.</p><p><details>
  <summary>اسپویلر</summary>
  <img src="https://media.giphy.com/media/Dn1QRA9hqMcoMz9zVZ/giphy.gif">
</details></p><h2>🚀 شروع سریع</h2></p><p>نصب:</p><pre><code class="language-bash"># npm
npm i ofetch</p><h1>yarn</h1>
yarn add ofetch</code></pre></p><p>ایمپورت:</p><pre><code class="language-js">// ESM / Typescript
import { ofetch } from "ofetch";</p><p>// CommonJS
const { ofetch } = require("ofetch");</code></pre></p><h2>✔️ سازگار با Node.js</h2></p><p>ما از <a href="https://nodejs.org/api/packages.html#packages_conditional_exports" target="_blank" rel="noopener noreferrer">صادرات شرطی</a> برای شناسایی Node.js
و استفاده خودکار از <a href="https://github.com/unjs/node-fetch-native" target="_blank" rel="noopener noreferrer">unjs/node-fetch-native</a> بهره می‌بریم. اگر <code>globalThis.fetch</code> در دسترس باشد، استفاده خواهد شد. برای استفاده از API اصلی fetch آزمایشی در Node.js 17.5.0 به بالا از فلگ <a href="https://nodejs.org/dist/latest-v17.x/docs/api/cli.html#--experimental-fetch" target="_blank" rel="noopener noreferrer"><code>--experimental-fetch</code></a> استفاده کنید.</p><h2>✔️ تجزیه پاسخ</h2></p><p><code>ofetch</code> به صورت هوشمند با استفاده از <a href="https://github.com/unjs/destr" target="_blank" rel="noopener noreferrer">destr</a> داده‌های JSON و مقادیر بومی را تجزیه می‌کند و در صورت شکست، به متن خام بازمی‌گردد.</p><pre><code class="language-js">const { users } = await ofetch("/api/users");</code></pre></p><p>برای انواع محتوای باینری، <code>ofetch</code> به جای آن یک شیء <code>Blob</code> بازمی‌گرداند.</p><p>شما می‌توانید یک parser متفاوت به جز <code>destr</code> ارائه دهید، یا با تعیین مقدار <code>blob</code>، <code>arrayBuffer</code> یا <code>text</code>، تجزیه بدنه را با متد مربوط به <code>FetchResponse</code> اجبار کنید.</p><pre><code class="language-js">// استفاده از JSON.parse
await ofetch("/movie?lang=en", { parseResponse: JSON.parse });</p><p>// بازگرداندن متن به همان صورت
await ofetch("/movie?lang=en", { parseResponse: (txt) => txt });</p><p>// دریافت نسخه blob از پاسخ
await ofetch("/api/generate-image", { responseType: "blob" });</code></pre></p><h2>✔️ بدنه JSON</h2></p><p>اگر یک شیء یا کلاسی با متد <code>.toJSON()</code> به گزینه <code>body</code> ارسال شود، <code>ofetch</code> به صورت خودکار آن را رشته‌ای می‌کند.</p><p><code>ofetch</code> از <code>JSON.stringify()</code> برای تبدیل شیء ارسالی استفاده می‌کند. کلاس‌هایی که متد <code>.toJSON()</code> ندارند باید قبل از ارسال به گزینه <code>body</code> به صورت رشته تبدیل شوند.</p><p>برای متدهای <code>PUT</code>، <code>PATCH</code> و <code>POST</code>، زمانی که بدنه‌ای از نوع رشته یا شیء تنظیم شود، <code>ofetch</code> به صورت پیش‌فرض headerهای <code>content-type: "application/json"</code> و <code>accept: "application/json"</code> را اضافه می‌کند (که همیشه می‌توانید آن‌ها را بازنویسی کنید).</p><p>علاوه بر این، <code>ofetch</code> پاسخ‌های باینری با <code>Buffer</code>، <code>ReadableStream</code>، <code>Stream</code> و <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch#body" target="_blank" rel="noopener noreferrer">انواع بدنه سازگار</a> را پشتیبانی می‌کند. <code>ofetch</code> به صورت خودکار گزینه <code>duplex: "half"</code> را برای پشتیبانی از استریم فعال می‌کند!</p><p><strong>مثال:</strong></p><pre><code class="language-js">const { users } = await ofetch("/api/users", {
  method: "POST",
  body: { some: "json" },
});</code></pre></p><h2>✔️ مدیریت خطاها</h2></p><p><code>ofetch</code> به صورت خودکار زمانی که مقدار <code>response.ok</code> برابر false باشد، خطا را با یک پیام کاربرپسند و stack فشرده (بدون نشان دادن جزئیات داخلی) پرتاب می‌کند.</p><p>بدنه خطا به صورت تجزیه‌شده با <code>error.data</code> در دسترس است. همچنین می‌توانید از نوع <code>FetchError</code> استفاده کنید.</p><pre><code class="language-ts">await ofetch("https://google.com/404");
// FetchError: [GET] "https://google/404": 404 Not Found
//     at async main (/project/playground.ts:4:3)</code></pre></p><p>برای گرفتن پاسخ خطا:</p><pre><code class="language-ts">``<code>markdown
await ofetch("/url").catch((error) => error.data);</code></pre></p><p>برای جلوگیری از گرفتن خطای وضعیت، می‌توانید گزینه </code>ignoreResponseError<code> را تنظیم کنید:</p><pre><code class="language-ts">await ofetch("/url", { ignoreResponseError: true });</code></pre></p><h2>✔️ تلاش مجدد خودکار (Auto Retry)</h2></p><p></code>ofetch<code> به صورت خودکار اگر خطایی رخ دهد و اگر کد وضعیت پاسخ در لیست </code>retryStatusCodes<code> باشد، درخواست را مجدداً تلاش می‌کند:</p><p><strong>کدهای وضعیت تلاش مجدد:</strong></p><ul><li></code>408<code> - پایان مهلت درخواست (Request Timeout)</li>
<li></code>409<code> - تداخل (Conflict)</li>
<li></code>425<code> - خیلی زود (Too Early) (<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Early-Data" target="_blank" rel="noopener noreferrer">تجربی</a>)</li>
<li></code>429<code> - درخواست‌های بیش از حد (Too Many Requests)</li>
<li></code>500<code> - خطای داخلی سرور (Internal Server Error)</li>
<li></code>502<code> - دروازه بد (Bad Gateway)</li>
<li></code>503<code> - سرویس در دسترس نیست (Service Unavailable)</li>
<li></code>504<code> - پایان مهلت دروازه (Gateway Timeout)</li></p><p></ul>شما می‌توانید تعداد تلاش مجدد و تاخیر بین آن‌ها را با استفاده از گزینه‌های </code>retry<code> و </code>retryDelay<code> مشخص کنید و همچنین یک آرایه سفارشی از کدها را با استفاده از گزینه </code>retryStatusCodes<code> ارسال نمایید.</p><p>مقدار پیش‌فرض برای </code>retry<code>، یک بار تلاش مجدد است، به جز برای متدهای </code>POST<code>، </code>PUT<code>، </code>PATCH<code> و </code>DELETE<code> که به صورت پیش‌فرض </code>ofetch<code> تلاشی برای جلوگیری از بروز عوارض جانبی انجام نمی‌دهد. اگر مقدار سفارشی برای </code>retry<code> تنظیم کنید، <strong>همیشه برای همه درخواست‌ها تلاش مجدد خواهد کرد</strong>.</p><p>مقدار پیش‌فرض </code>retryDelay<code>، صفر میلی‌ثانیه است.</p><pre><code class="language-ts">await ofetch("http://google.com/404", {
  retry: 3,
  retryDelay: 500, // میلی‌ثانیه
  retryStatusCodes: [ 404, 500 ], // کدهای وضعیت پاسخ برای تلاش مجدد
});</code></pre></p><h2>✔️ زمان‌سنجی (Timeout)</h2></p><p>شما می‌توانید </code>timeout<code> را بر حسب میلی‌ثانیه مشخص کنید تا پس از پایان مهلت، درخواست به صورت خودکار لغو شود (به صورت پیش‌فرض غیرفعال است).</p><pre><code class="language-ts">await ofetch("http://google.com/404", {
  timeout: 3000, // پایان مهلت پس از ۳ ثانیه
});</code></pre></p><h2>✔️ سازگاری با نوع (Type Friendly)</h2></p><p>پاسخ می‌تواند از کمک نوعی بهره‌مند شود:</p><pre><code class="language-ts">const article = await ofetch<Article>(</code>/api/article/${id}<code>);
// تکمیل خودکار برای کار با article.id فعال است</code></pre></p><h2>✔️ افزودن </code>baseURL<code></h2></p><p>با استفاده از گزینه </code>baseURL<code>، </code>ofetch<code> آن را برای اسلش‌های پایانی/ابتدایی و پارامترهای جستجوی کوئری برای baseURL با استفاده از <a href="https://github.com/unjs/ufo" target="_blank" rel="noopener noreferrer">ufo</a> اضافه می‌کند:</p><pre><code class="language-js">await ofetch("/config", { baseURL });</code></pre></p><h2>✔️ افزودن پارامترهای جستجوی کوئری</h2></p><p>با استفاده از گزینه </code>query<code> (یا </code>params<code> به عنوان نام مستعار)، </code>ofetch<code> پارامترهای جستجوی کوئری را به URL اضافه می‌کند و کوئری موجود در خود درخواست را با استفاده از <a href="https://github.com/unjs/ufo" target="_blank" rel="noopener noreferrer">ufo</a> حفظ می‌کند:</p><pre><code class="language-js">await ofetch("/movie?lang=en", { query: { id: 123 } });</code></pre></p><h2>✔️ اینترسپتور‌ها (Interceptors)</h2></p><p>ارائه اینترسپتورهای ناهمگام برای اتصال به رویدادهای چرخه عمر فراخوانی </code>ofetch<code> ممکن است.</p><p>شاید بخواهید از </code>ofetch.create<code> برای تنظیم اینترسپتورهای مشترک استفاده کنید.</p><h3></code>onRequest({ request, options })<code></h3></p><p></code>onRequest<code> بلافاصله پس از فراخوانی </code>ofetch<code> اجرا می‌شود و به شما اجازه می‌دهد گزینه‌ها را تغییر دهید یا لاگ‌برداری ساده انجام دهید.</p><pre><code class="language-js">await ofetch("/api", {
  async onRequest({ request, options }) {
    // لاگ‌برداری درخواست
    console.log("[fetch request]", request, options);</p><p>    // افزودن </code>?t=1640125211170<code> به پارامترهای جستجوی کوئری
    options.query = options.query || {};
    options.query.t = new Date();
  },
});</code></pre></p><h3></code>onRequestError({ request, options, error })<code></h3></p><p></code>onRequestError<code> زمانی فراخوانی می‌شود که درخواست fetch شکست بخورد.
<pre><code class="language-"></code>`<code>js
await ofetch("/api", {
  async onRequestError({ request, options, error }) {
    // ثبت خطا
    console.log("[fetch request error]", request, error);
  },
});</code></pre></p><h3></code>onResponse({ request, options, response })<code></h3></p><p></code>onResponse<code> پس از فراخوانی </code>fetch<code> و تجزیه بدنه فراخوانی می‌شود.</p><pre><code class="language-js">await ofetch("/api", {
  async onResponse({ request, response, options }) {
    // ثبت پاسخ
    console.log("[fetch response]", request, response.status, response.body);
  },
});</code></pre></p><h3></code>onResponseError({ request, options, response })<code></h3></p><p></code>onResponseError<code> مشابه </code>onResponse<code> است اما زمانی فراخوانی می‌شود که درخواست fetch انجام شده اما </code>response.ok<code> برابر با </code>true<code> نباشد.</p><pre><code class="language-js">await ofetch("/api", {
  async onResponseError({ request, response, options }) {
    // ثبت خطا
    console.log(
      "[fetch response error]",
      request,
      response.status,
      response.body
    );
  },
});</code></pre></p><h3>ارسال آرایه‌ای از اینترسپتور‌ها</h3></p><p>در صورت نیاز، امکان ارسال آرایه‌ای از توابع که به صورت ترتیبی فراخوانی می‌شوند نیز وجود دارد.</p><pre><code class="language-js">await ofetch("/api", {
  onRequest: [
    () => {
      /<em> انجام کاری </em>/
    },
    () => {
      /<em> انجام کار دیگر </em>/
    },
  ],
});</code></pre></p><h2>✔️ ایجاد fetch با گزینه‌های پیش‌فرض</h2></p><p>این ابزار زمانی مفید است که نیاز به استفاده از گزینه‌های مشترک در چندین فراخوانی fetch داشته باشید.</p><p><strong>توجه:</strong> مقادیر پیش‌فرض در یک سطح کپی و به ارث برده می‌شوند. مراقب گزینه‌های تو در تو مانند </code>headers<code> باشید.</p><pre><code class="language-js">const apiFetch = ofetch.create({ baseURL: "/api" });</p><p>apiFetch("/test"); // معادل ofetch('/test', { baseURL: '/api' })</code></pre></p><h2>💡 افزودن هدرها</h2></p><p>با استفاده از گزینه‌ی </code>headers<code>، </code>ofetch<code> هدرهای اضافی را علاوه بر هدرهای پیش‌فرض درخواست اضافه می‌کند:</p><pre><code class="language-js">await ofetch("/movies", {
  headers: {
    Accept: "application/json",
    "Cache-Control": "no-cache",
  },
});</code></pre></p><h2>🍣 دسترسی به پاسخ خام</h2></p><p>در صورتی که نیاز به دسترسی به پاسخ خام (برای هدرها و غیره) دارید، می‌توانید از </code>ofetch.raw<code> استفاده کنید:</p><pre><code class="language-js">const response = await ofetch.raw("/sushi");</p><p>// response._data
// response.headers
// ...</code></pre></p><h2>🌿 استفاده از Fetch بومی</h2></p><p>به عنوان یک میانبر، می‌توانید از </code>ofetch.native<code> استفاده کنید که API بومی </code>fetch<code> را فراهم می‌کند.</p><pre><code class="language-js">const json = await ofetch.native("/sushi").then((r) => r.json());</code></pre>
<pre><code class="language-">
<h2>🕵️ افزودن HTTP(S) Agent</h2></p><p>در محیط‌های Node.js (نسخه ۱۸ به بالا)، می‌توانید یک دیسپچر سفارشی برای رهگیری درخواست‌ها و پشتیبانی از ویژگی‌هایی مانند پروکسی و گواهی‌های خودامضا شده فراهم کنید. این قابلیت توسط <a href="https://undici.nodejs.org/" target="_blank" rel="noopener noreferrer">undici</a> به صورت داخلی در Node.js فعال است. <a href="https://undici.nodejs.org/#/docs/api/Dispatcher" target="_blank" rel="noopener noreferrer">بیشتر بخوانید</a> درباره API دیسپچر.</p><p>برخی agentهای موجود:</p><ul><li></code>ProxyAgent<code>: یک کلاس Proxy Agent که API مربوط به Agent را پیاده‌سازی می‌کند. این امکان را می‌دهد تا ارتباط به‌سادگی از طریق پروکسی انجام شود. (<a href="https://undici.nodejs.org/#/docs/api/ProxyAgent" target="_blank" rel="noopener noreferrer">مستندات</a>)</li>
<li></code>MockAgent<code>: یک کلاس Agent شبیه‌سازی‌شده که API مربوط به Agent را پیاده‌سازی می‌کند. این امکان را فراهم می‌کند تا درخواست‌های HTTP انجام شده از طریق undici را رهگیری کرده و پاسخ‌های شبیه‌سازی‌شده بازگردانید. (<a href="https://undici.nodejs.org/#/docs/api/MockAgent" target="_blank" rel="noopener noreferrer">مستندات</a>)</li>
<li></code>Agent<code>: Agent اجازه ارسال درخواست به چندین origin مختلف را می‌دهد. (<a href="https://undici.nodejs.org/#/docs/api/Agent" target="_blank" rel="noopener noreferrer">مستندات</a>)</li></p><p></ul><strong>مثال:</strong> تنظیم یک پروکسی agent برای یک درخواست:
</code></pre>ts
import { ProxyAgent } from "undici";
import { ofetch } from "ofetch";</p><p>const proxyAgent = new ProxyAgent("http://localhost:3128");
const data = await ofetch("https://icanhazip.com", { dispatcher: proxyAgent });
<pre><code class="language-">
<strong>مثال:</strong> ساخت یک instance سفارشی fetch با پروکسی فعال:
</code></pre>ts
import { ProxyAgent, setGlobalDispatcher } from "undici";
import { ofetch } from "ofetch";</p><p>const proxyAgent = new ProxyAgent("http://localhost:3128");
const fetchWithProxy = ofetch.create({ dispatcher: proxyAgent });</p><p>const data = await fetchWithProxy("https://icanhazip.com");
<pre><code class="language-">
<strong>مثال:</strong> تنظیم پروکسی agent برای همه درخواست‌ها:
</code></pre>ts
import { ProxyAgent, setGlobalDispatcher } from "undici";
import { ofetch } from "ofetch";</p><p>const proxyAgent = new ProxyAgent("http://localhost:3128");
setGlobalDispatcher(proxyAgent);</p><p>const data = await ofetch("https://icanhazip.com");
<pre><code class="language-">
<strong>مثال:</strong> اجازه دادن به گواهی خودامضا شده (با مسئولیت خودتان استفاده کنید!)
</code></pre>ts
import { ProxyAgent } from "undici";
import { ofetch } from "ofetch";</p><p>// توجه: این کار fetch را در برابر حملات MITM ناامن می‌کند. با مسئولیت خودتان استفاده کنید!
const unsecureProxyAgent = new ProxyAgent({ requestTls: { rejectUnauthorized: false } });
const unsecureFetch = ofetch.create({ dispatcher: unsecureProxyAgent });</p><p>const data = await unsecureFetch("https://www.squid-cache.org/");
<pre><code class="language-">
در نسخه‌های قدیمی‌تر Node.js (<18)، همچنین می‌توانید از </code>agent<code> استفاده کنید:
</code></pre>ts
import { HttpsProxyAgent } from "https-proxy-agent";</p><p>await ofetch("/api", {
  agent: new HttpsProxyAgent("http://example.com"),
});
<pre><code class="language-">
<h3>پشتیبانی از </code>keepAlive<code> (فقط برای Node زیر ۱۸)</h3></p><p>با تنظیم متغیر محیطی </code>FETCH_KEEP_ALIVE<code> روی مقدار </code>true<code>، یک HTTP/HTTPS agent ثبت می‌شود که سوکت‌ها را حتی زمانی که درخواست فعالی وجود ندارد، نگه می‌دارد تا برای درخواست‌های آینده بدون نیاز به برقراری مجدد اتصال TCP مورد استفاده قرار گیرند.</p><p><strong>توجه:</strong> این گزینه ممکن است باعث نشت حافظه شود. لطفاً <a href="https://github.com/node-fetch/node-fetch/pull/1325" target="_blank" rel="noopener noreferrer">node-fetch/node-fetch#1325</a> را بررسی کنید.</p><h2>📦 نکات مربوط به Bundler</h2></p><ul><li>همه تارگت‌ها با فرمت Module و CommonJS و با named export صادر می‌شوند</li>
<li>هیچ خروجی برای حفظ سینتکس مدرن transpil نمی‌شود</li>
  <li>احتمالاً لازم است پکیج‌های </code>ofetch<code>، </code>destr<code> و </code>ufo<code> را برای پشتیبانی ES5 با Babel ترنسپایل کنید</li>
<li>برای پشتیبانی مرورگرهای قدیمی باید global مربوط به </code>fetch<code> را به صورت polyfill اضافه کنید، مثل استفاده از <a href="https://github.com/developit/unfetch" target="_blank" rel="noopener noreferrer">unfetch</a></li></p><p></ul><h2>❓ سوالات متداول</h2></p><p><strong>چرا export با نام </code>ofetch<code> است نه </code>fetch<code>؟</strong></p><p>استفاده از نام </code>fetch<code> می‌تواند گیج‌کننده باشد چون API متفاوت است ولی همچنان یک fetch محسوب می‌شود، پس نزدیک‌ترین نام ممکن انتخاب شده است. البته می‌توانید </code>{ fetch }<code> را از </code>ofetch<code> ایمپورت کنید که برای Node.js به صورت خودکار polyfill و در سایر موارد از نسخه بومی استفاده می‌کند.</p><p><strong>چرا export پیش‌فرض وجود ندارد؟</strong></p><p>خروجی پیش‌فرض همواره ریسک ترکیب شدن با خروجی‌های CommonJS را دارد.</p><p>این کار همچنین تضمین می‌کند که بتوانیم ابزارهای بیشتری بدون شکستن پکیج معرفی کنیم و نیز استفاده از نام </code>ofetch` را تشویق می‌کند.</p><p><strong>چرا ترنسپایل نشده است؟</strong></p><p>ترنسپایل کردن کتابخانه‌ها باعث عقب‌گرد وب با کدهای قدیمی می‌شود که برای بیشتر کاربران غیرضروری است.</p><p>اگر لازم است از کاربران قدیمی پشتیبانی کنید، می‌توانید کتابخانه را به صورت اختیاری در زنجیره build خود ترنسپایل کنید.</code></pre>
<h2>مجوز</h2></p><p>MIT. ساخته شده با 💖</p><p><!-- نشان‌ها --></p><p>[npm-version-src]: https://img.shields.io/npm/v/ofetch?style=flat&colorA=18181B&colorB=F0DB4F
[npm-version-href]: https://npmjs.com/package/ofetch
[npm-downloads-src]: https://img.shields.io/npm/dm/ofetch?style=flat&colorA=18181B&colorB=F0DB4F
[npm-downloads-href]: https://npmjs.com/package/ofetch
[codecov-src]: https://img.shields.io/codecov/c/gh/unjs/ofetch/main?style=flat&colorA=18181B&colorB=F0DB4F
[codecov-href]: https://codecov.io/gh/unjs/ofetch
[bundle-src]: https://img.shields.io/bundlephobia/minzip/ofetch?style=flat&colorA=18181B&colorB=F0DB4F
[bundle-href]: https://bundlephobia.com/result?p=ofetch
[license-src]: https://img.shields.io/github/license/unjs/ofetch.svg?style=flat&colorA=18181B&colorB=F0DB4F
[license-href]: https://github.com/unjs/ofetch/blob/main/LICENSE
[jsdocs-src]: https://img.shields.io/badge/jsDocs.io-reference-18181B?style=flat&colorA=18181B&colorB=F0DB4F
[jsdocs-href]: https://www.jsdocs.io/package/ofetch

---

Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">Open Ai Tx</a> | Last indexed: 2025-06-30

---</p>
        </div>
        
        <div class="original-link">
            <strong>Original README:</strong> <a href="https://raw.githubusercontent.com/unjs/ofetch/main/README.md" target="_blank" rel="noopener noreferrer">View on GitHub</a>
        </div>
    </div>
    
    <div class="footer">
        <p>Translated by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">OpenAiTx</a> | 
        Last updated: 2025-07-24 
    </div>
    
</body>
</html>