<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReferenceTrimmer - Easily identify which dependencies can be removed from a .NET project</title>
    <meta name="description" content="Easily identify which dependencies can be removed from a .NET project">
    <meta name="keywords" content="ReferenceTrimmer, English, documentation, GitHub, open source">
    <meta name="author" content="OpenAiTx">
    <meta name="robots" content="index, follow">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "ReferenceTrimmer",
  "description": "Easily identify which dependencies can be removed from a .NET project",
  "author": {
    "@type": "Person",
    "name": "dfederm"
  },
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "5",
    "ratingCount": 212
  },
  "url": "https://OpenAiTx.github.io/projects/dfederm/ReferenceTrimmer/README-en.html",
  "sameAs": "https://raw.githubusercontent.com/dfederm/ReferenceTrimmer/main/README.md",
  "datePublished": "2025-12-21",
  "dateModified": "2025-12-21"
}
    </script>
    
    <!-- GitHub-style CSS -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #24292e;
            background-color: #ffffff;
            max-width: 980px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .container {
            background: #ffffff;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 24px;
            margin-bottom: 20px;
        }
        
        .header {
            border-bottom: 1px solid #e1e4e8;
            padding-bottom: 16px;
            margin-bottom: 24px;
        }
        
        .project-title {
            font-size: 2em;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .project-title a {
            color: #24292e;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: color 0.2s ease;
        }
        
        .project-title a:hover {
            color: #0366d6;
            text-decoration: none;
        }
        
        .project-title .github-icon {
            width: 1em;
            height: 1em;
            fill: currentColor;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }
        
        .project-title a:hover .github-icon {
            opacity: 1;
        }
        
        .project-meta {
            color: #586069;
            font-size: 14px;
            margin-bottom: 16px;
        }
        
        .stars {
            display: inline-block;
            margin-right: 16px;
        }
        
        .language {
            display: inline-block;
            background-color: #f1f8ff;
            color: #0366d6;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .content {
            font-size: 16px;
            line-height: 1.6;
        }
        
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
            color: #24292e;
        }
        
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        
        p {
            margin-bottom: 16px;
        }
        
        code {
            background-color: #f6f8fa;
            border-radius: 3px;
            font-size: 85%;
            margin: 0;
            padding: 0.2em 0.4em;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        }
        
        pre {
            background-color: #f6f8fa;
            border-radius: 6px;
            font-size: 85%;
            line-height: 1.45;
            overflow: auto;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        pre code {
            background-color: transparent;
            border: 0;
            display: inline;
            line-height: inherit;
            margin: 0;
            overflow: visible;
            padding: 0;
            word-wrap: normal;
        }
        
        a {
            color: #0366d6;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        ul, ol {
            margin-bottom: 16px;
            padding-left: 2em;
        }
        
        li {
            margin-bottom: 0.25em;
        }
        
        blockquote {
            border-left: 4px solid #dfe2e5;
            color: #6a737d;
            margin: 0 0 16px 0;
            padding: 0 1em;
        }
        
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e1e4e8;
            color: #586069;
            font-size: 14px;
            text-align: center;
        }
        
        .footer a {
            color: #0366d6;
        }
        
        .original-link {
            margin-top: 16px;
            padding: 12px;
            background-color: #f6f8fa;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 16px;
            }
            
            .project-title {
                font-size: 1.5em;
            }
        }
    </style>
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <!-- Bing Count -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sh95yd6uwt");
    </script>        

    <!-- Statcounter -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>    
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="project-title">
                <a href="https://github.com/dfederm/ReferenceTrimmer" target="_blank" rel="noopener noreferrer">
                    <svg class="github-icon" viewBox="0 0 16 16" aria-hidden="true">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                    ReferenceTrimmer
                </a>
            </h1>
            <div class="project-meta">
                <span class="stars">⭐ 212 stars</span>
                <span class="language">English</span>
                <span>by dfederm</span>
            </div>
        </div>
        
        <div class="content">
            <h1>ReferenceTrimmer</h1>
<a href="https://www.nuget.org/packages/ReferenceTrimmer" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/nuget/v/ReferenceTrimmer.svg" alt="NuGet Version"></a>
<a href="https://www.nuget.org/packages/ReferenceTrimmer" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/nuget/dt/ReferenceTrimmer.svg" alt="NuGet Downloads"></a></p><p>Easily identify which C# dependencies can be removed from an MSBuild project, and expose MSVC output to show unused libraries and delay-load DLLs at link time. Removing project dependencies flattens your build dependency graph which can improve build parallelism and reduce end-to-end build time.</p><h2>Rules</h2>
The following warnings are generated by this package:</p><p>| Id     | Description |
|--------|-------------|
| RT0000 | Enable documentation generation for accuracy of used references detection |
| RT0001 | Unnecessary reference  |
| RT0002 | Unnecessary project reference |
| RT0003 | Unnecessary package reference |</p><h2>How to use</h2>
Add a package reference to the <a href="https://www.nuget.org/packages/ReferenceTrimmer" target="_blank" rel="noopener noreferrer">ReferenceTrimmer</a> package in your projects, or as a common package reference in the repo's <a href="https://raw.githubusercontent.com/dfederm/ReferenceTrimmer/main/./Directory.Build.props" target="_blank" rel="noopener noreferrer"><code>Directory.Packages.props</code></a>.</p><p>If you're using <a href="https://learn.microsoft.com/en-us/nuget/consume-packages/Central-Package-Management" target="_blank" rel="noopener noreferrer">Central Package Management</a>, you can use it as a <code>GlobalPackageReference</code> in your <code>Directory.Packages.props</code> to apply it to the entire repo.</p><pre><code class="language-xml">  <ItemGroup>
    <GlobalPackageReference Include="ReferenceTrimmer" Version="{LatestVersion}" />
  </ItemGroup></code></pre>
<h3>C#</h3>
You'll need to enable C# documentation XML generation to ensure good analysis results. If your repo is not already using docxml globally, this can introduce a large number of errors and warnings specific to docxml. Additionally, turning on docxml adds additional output I/O that can slow down large repos.</p><p>You can turn off specific docxml related warnings and errors while defaulting ReferenceTrimmer to off using a block of code like this in your <code>Directory.Build.props</code>. Turn on the ReferenceTrimmer build by setting <code>/p:EnableReferenceTrimmer=true</code> on the MSBuild command line or setting the same property value as an environment variable. You could create a separate build pipeline for your repo to run ReferenceTrimmer builds.</p><pre><code class="language-xml">  <!-- ReferenceTrimmer - run build with /p:EnableReferenceTrimmer=true to enable -->
  <PropertyGroup Label="ReferenceTrimmer">
    <EnableReferenceTrimmer Condition=" '$(EnableReferenceTrimmer)' == '' ">false</EnableReferenceTrimmer>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(EnableReferenceTrimmer)' == 'true' and '$(GenerateDocumentationFile)' != 'true' " Label="ReferenceTrimmer">
    <!-- Documentation file generation is required for more accurate C# detection. -->
    <GenerateDocumentationFile>true</GenerateDocumentationFile></p><p>    <!-- Suppress XML doc comment issues to avoid errors during ReferenceTrimmer:
         <ul><li>CS0419: Ambiguous reference in cref attribute</li>
         <li>CS1570: XML comment has badly formed XML</li>
         <li>CS1573: Parameter has no matching param tag in the XML comment</li>
         <li>CS1574: XML comment has cref attribute that could not be resolved</li>
         <li>CS1584: XML comment has syntactically incorrect cref attribute</li>
         <li>CS1591: Missing XML comment for publicly visible type or member</li>
         <li>SA1602: Enumeration items should be documented</li>
    </ul>-->
    <NoWarn>$(NoWarn);419;1570;1573;1574;1584;1591;SA1602</NoWarn>
  </PropertyGroup></code></pre>
Note: To get better results, enable the <a href="https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/style-rules/ide0005" target="_blank" rel="noopener noreferrer"><code>IDE0005</code></a> unnecessary <code>using</code> rule. This avoids the C# compiler seeing a false positive assembly usage from unneeded <code>using</code> directives causing it to miss a removable dependency. See also the note for why IDE0005 code analysis rule requires <code><GenerateDocumentationFile></code> property to be enabled. Documentation generation is also required for accuracy of used references detection (based on https://github.com/dotnet/roslyn/issues/66188).</p><h3>C++ (.vcxproj projects)</h3>
ReferenceTrimmer for C++ is an MSBuild <a href="https://learn.microsoft.com/en-us/visualstudio/msbuild/logging-in-a-multi-processor-environment?view=vs-2022" target="_blank" rel="noopener noreferrer">distributed logger</a>. It writes guidance to the MSBuild stdout stream (not to the MSBuild internal logger at this time) and writes <code>ReferenceTrimmerUnusedMSVCLibraries.json.log</code> to the build working directory.</p><p>The distributed logger requires configuration at the MSBuild command line using the <code>-distributedlogger</code> parameter. See the <a href="https://raw.githubusercontent.com/dfederm/ReferenceTrimmer/main/./examples/BuildWithReferenceTrimmer.cmd" target="_blank" rel="noopener noreferrer">BuildWithReferenceTrimmer example script</a> for how to orchestrate pulling and using the package's loggers.</p><p>Use <code>msbuild -restore</code> or <code>msbuild /t:Restore</code> instead of <code>dotnet restore</code> to ensure .vcxproj restore will work to add the ReferenceTrimmer props and targets to your build. <em>NOTE</em>: If you are seeing a <code>Sequence contains no elements</code> exception from MSBuild, see https://github.com/dotnet/NuGet.BuildTasks/issues/154 for a workaround or status on a fix.</p><p>The current implementation turns on MSVC <code>link.exe</code> flags <code>/VERBOSE:UNUSEDLIBS</code> and <code>/VERBOSE:UNUSEDDELAYLOAD</code>. These flags tell the linker to print out unused .lib files and delay-load DLLs to stdout. This will include .lib files containing code bundles as well as import libraries for DLLs. Removing these libraries reduces I/O and memory usage by the linker. Here's an example of the linker output:</p><pre><code class="language-text">Unused libraries:
  C:\Program Files (x86)\Windows Kits\10\lib\10.0.19041.0\um\x64\gdi32.lib
  C:\Program Files (x86)\Windows Kits\10\lib\10.0.19041.0\um\x64\winspool.lib
  C:\Program Files (x86)\Windows Kits\10\lib\10.0.19041.0\um\x64\comdlg32.lib</code></pre></p><p>ReferenceTrimmer reads this output and splits the resulting libraries into two sets:</p><p>#### Windows SDK import libraries
The Microsoft C++ SDK for MSBuild includes in the <code>AdditionalDependencies</code> property a default list of Win32 import libraries like kernel32.lib and user32.lib. You can find the default list in your local VS installation by searching:</p><pre><code class="language-cmd">findstr /s CoreLibraryDependencies "\Program Files"\*props</code></pre></p><p>To disable these, modify the vcxproj <code><AdditionalDependencies></code> property to just the list of SDK .lib files needed for the project, and do not add <code>%(AdditionalDependencies)</code> to the property to avoid the default list. Example:</p><pre><code class="language-xml"><ItemDefinitionGroup>
  <Link>
    <AdditionalDependencies>kernel32.lib;shlwapi.lib;ws2_32.lib</AdditionalDependencies>
  </Link>
</ItemDefinitionGroup></code></pre></p><p>Not all SDK .lib files can be removed this way. You might need to use <code><IgnoreSpecificDefaultLibraries></code> as well:</p><pre><code class="language-xml"><ItemDefinitionGroup>
  <Link>
    <IgnoreSpecificDefaultLibraries>OLDNAMES.lib;%(IgnoreSpecificDefaultLibraries)</IgnoreSpecificDefaultLibraries>
  </Link>
</ItemDefinitionGroup></code></pre></p><p>#### Package or Project libraries
If you find an unused .lib that is created by a .vcxproj in your repo, you should be able to remove the <code>ProjectReference</code> to that vcxproj to improve your build dependency graph and allow greater parallelism during build.</p><p>If you find an unused .lib that is from a package, remove the reference to that .lib from your project to speed up linking.</p><h2>Disabling a rule on a reference</h2>
To turn off a rule on a specific project or package reference, add the relevant RTxxxx code to a NoWarn metadata attribute. For example:</p><pre><code class="language-xml"><ProjectReference Include="../Other/Project.csproj" NoWarn="RT0002" /></code></pre></p><h2>Configuration</h2>
<code>$(EnableReferenceTrimmer)</code> - Controls whether the build logic should run for a given project. Defaults to <code>true</code>.</p><p><code>$(ReferenceTrimmerEnableVcxproj)</code> - Controls whether MSVC link flags are set up to print out unused libraries and delay-load DLLs. Defaults to <code>true</code>.</p><h2>How does it work?</h2></p><h3>C#</h3>
There are two main pieces to C# support. First there is an MSBuild task which collects all references passed to the compiler. There is also a Roslyn Analyzer which uses the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.codeanalysis.compilation.getusedassemblyreferences" target="_blank" rel="noopener noreferrer"><code>GetUsedAssemblyReferences</code></a> analyzer API which is available starting with Roslyn compiler that shipped with Visual Studio 2019 version 16.10, .NET 5. (see https://github.com/dotnet/roslyn/blob/main/docs/wiki/NuGet-packages.md#versioning). This is the compiler telling us exactly what references were needed as part of compilation. The analyzer then compares the set of references the Task gathered with the references the compiler says were used.</p><h3>C++ (.vcxproj projects)</h3>
ReferenceTrimmer enables the MSVC <code>link.exe</code> flags noted above, then parses output coming from the <code>Link</code> MSBuild task. It categorizes the outputs and emits them into the MSBuild console output and the JSON output file noted above. It does not issue MSBuild warnings at this time.</p><h2>Future development</h2>
The outcome of https://github.com/dotnet/sdk/issues/10414 may be of use for <code>ReferenceTrimmer</code> future updates.</p><p>
---

Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">Open Ai Tx</a> | Last indexed: 2025-12-21

---</p>
        </div>
        
        <div class="original-link">
            <strong>Original README:</strong> <a href="https://raw.githubusercontent.com/dfederm/ReferenceTrimmer/main/README.md" target="_blank" rel="noopener noreferrer">View on GitHub</a>
        </div>
    </div>
    
    <div class="footer">
        <p>Translated by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">OpenAiTx</a> | 
        Last updated: 2025-12-21 
    </div>
    
</body>
</html>