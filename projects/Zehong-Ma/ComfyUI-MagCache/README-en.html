<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ComfyUI-MagCache - Read ComfyUI-MagCache documentation in English. This project has 194 stars on GitHub.</title>
    <meta name="description" content="Read ComfyUI-MagCache documentation in English. This project has 194 stars on GitHub.">
    <meta name="keywords" content="ComfyUI-MagCache, English, documentation, GitHub, open source">
    <meta name="author" content="OpenAiTx">
    <meta name="robots" content="index, follow">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "ComfyUI-MagCache",
  "description": "Read ComfyUI-MagCache documentation in English. This project has 194 stars on GitHub.",
  "author": {
    "@type": "Person",
    "name": "Zehong-Ma"
  },
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "5",
    "ratingCount": 194
  },
  "url": "https://OpenAiTx.github.io/projects/Zehong-Ma/ComfyUI-MagCache/README-en.html",
  "sameAs": "https://raw.githubusercontent.com/Zehong-Ma/ComfyUI-MagCache/main/README.md",
  "datePublished": "2025-09-16",
  "dateModified": "2025-09-16"
}
    </script>
    
    <!-- GitHub-style CSS -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #24292e;
            background-color: #ffffff;
            max-width: 980px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .container {
            background: #ffffff;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 24px;
            margin-bottom: 20px;
        }
        
        .header {
            border-bottom: 1px solid #e1e4e8;
            padding-bottom: 16px;
            margin-bottom: 24px;
        }
        
        .project-title {
            font-size: 2em;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .project-title a {
            color: #24292e;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: color 0.2s ease;
        }
        
        .project-title a:hover {
            color: #0366d6;
            text-decoration: none;
        }
        
        .project-title .github-icon {
            width: 1em;
            height: 1em;
            fill: currentColor;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }
        
        .project-title a:hover .github-icon {
            opacity: 1;
        }
        
        .project-meta {
            color: #586069;
            font-size: 14px;
            margin-bottom: 16px;
        }
        
        .stars {
            display: inline-block;
            margin-right: 16px;
        }
        
        .language {
            display: inline-block;
            background-color: #f1f8ff;
            color: #0366d6;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .content {
            font-size: 16px;
            line-height: 1.6;
        }
        
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
            color: #24292e;
        }
        
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        
        p {
            margin-bottom: 16px;
        }
        
        code {
            background-color: #f6f8fa;
            border-radius: 3px;
            font-size: 85%;
            margin: 0;
            padding: 0.2em 0.4em;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        }
        
        pre {
            background-color: #f6f8fa;
            border-radius: 6px;
            font-size: 85%;
            line-height: 1.45;
            overflow: auto;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        pre code {
            background-color: transparent;
            border: 0;
            display: inline;
            line-height: inherit;
            margin: 0;
            overflow: visible;
            padding: 0;
            word-wrap: normal;
        }
        
        a {
            color: #0366d6;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        ul, ol {
            margin-bottom: 16px;
            padding-left: 2em;
        }
        
        li {
            margin-bottom: 0.25em;
        }
        
        blockquote {
            border-left: 4px solid #dfe2e5;
            color: #6a737d;
            margin: 0 0 16px 0;
            padding: 0 1em;
        }
        
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e1e4e8;
            color: #586069;
            font-size: 14px;
            text-align: center;
        }
        
        .footer a {
            color: #0366d6;
        }
        
        .original-link {
            margin-top: 16px;
            padding: 12px;
            background-color: #f6f8fa;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 16px;
            }
            
            .project-title {
                font-size: 1.5em;
            }
        }
    </style>
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <!-- Bing Count -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sh95yd6uwt");
    </script>        

    <!-- Statcounter -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>    
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="project-title">
                <a href="https://github.com/Zehong-Ma/ComfyUI-MagCache" target="_blank" rel="noopener noreferrer">
                    <svg class="github-icon" viewBox="0 0 16 16" aria-hidden="true">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                    ComfyUI-MagCache
                </a>
            </h1>
            <div class="project-meta">
                <span class="stars">⭐ 194 stars</span>
                <span class="language">English</span>
                <span>by Zehong-Ma</span>
            </div>
        </div>
        
        <div class="content">
            <h1>ComfyUI-MagCache</h1></p><h2>🫖 Introduction </h2>
Magnitude-aware Cache (MagCache) is a training-free caching approach. It estimates the fluctuating differences among model outputs across timesteps based on the robust <strong>magnitude observations</strong>, and thereby accelerating the inference using the error modeling mechanism and adaptive cache strategy. MagCache works well for Video Diffusion Models, Image Diffusion models. For more details and results, please visit our <a href="https://zehong-ma.github.io/MagCache" target="_blank" rel="noopener noreferrer">project page</a> and <a href="https://github.com/Zehong-Ma/MagCache" target="_blank" rel="noopener noreferrer">code</a>.</p><p>MagCache has now been integrated into ComfyUI and is compatible with the ComfyUI native nodes. ComfyUI-MagCache is easy to use, simply connect the MagCache node with the ComfyUI native nodes for seamless usage.</p><h2>🔥 Latest News </h2>
<ul><li><strong>If you like our project, please give us a star ⭐ on GitHub for the latest update.</strong></li>
<li>[2025/6/30] 🔥 Support <a href="https://huggingface.co/black-forest-labs/FLUX.1-Kontext-dev" target="_blank" rel="noopener noreferrer">Flux-Kontext</a> with 2x speedup. Please see the demo <a href="https://github.com/user-attachments/assets/79d5f654-5828-442d-b1a1-9b754c17e457" target="_blank" rel="noopener noreferrer">here</a>.</li>
<li>[2025/6/19] 🔥 Support <a href="https://github.com/lllyasviel/FramePack" target="_blank" rel="noopener noreferrer">FramePack</a> with Gradio Demo in <a href="https://github.com/Zehong-Ma/MagCache" target="_blank" rel="noopener noreferrer">MagCache-FramePack</a>.</li>
<li>[2025/6/18] 👉 We're collecting the best parameter settings from the community. <br>     👉<strong>Open this <a href="https://github.com/Zehong-Ma/ComfyUI-MagCache/issues/15" target="_blank" rel="noopener noreferrer">discussion issue</a> to contribute your configuration!</strong></li>
<li>[2025/6/17] 🔥 Support <a href="https://github.com/ali-vilab/VACE" target="_blank" rel="noopener noreferrer">Wan2.1-VACE-1.3B</a>, achieving a 1.7× acceleration. </li>
<li>[2025/6/17] 🔥 MagCache is supported by <a href="https://github.com/kijai/ComfyUI-WanVideoWrapper" target="_blank" rel="noopener noreferrer">ComfyUI-WanVideoWrapper</a>. Thanks @<a href="https://github.com/kijai" target="_blank" rel="noopener noreferrer">kijai</a>. </li>
<li>[2025/6/16] 🔥 Support <a href="https://huggingface.co/lodestones/Chroma" target="_blank" rel="noopener noreferrer">Chroma</a>. Thanks @<a href="https://github.com/kabachuha" target="_blank" rel="noopener noreferrer">kabachuha</a> for the codebase.</li>
<li>[2025/6/10] 🔥 Support <a href="https://github.com/Wan-Video/Wan2.1" target="_blank" rel="noopener noreferrer">Wan2.1</a> T2V&I2V, <a href="https://github.com/Tencent/HunyuanVideo" target="_blank" rel="noopener noreferrer">HunyuanVideo</a> T2V, <a href="(https://github.com/black-forest-labs/flux" target="_blank" rel="noopener noreferrer">FLUX-dev</a>) T2I</li></p><p></ul><h2>Installation</h2>
<!-- Installation via ComfyUI-Manager is preferred. Simply search for ComfyUI-MagCache in the list of nodes and click install.
<h3>Manual installation --></h3>
<ul><li>Go to comfyUI custom_nodes folder, <code>ComfyUI/custom_nodes/</code></li>
<li>git clone https://github.com/zehong-ma/ComfyUI-MagCache.git</li>
<li>Go to ComfyUI-MagCache folder, <code>cd ComfyUI-MagCache/</code></li>
<li>pip install -r requirements.txt</li>
<li>Go to the project folder <code>ComfyUI/</code> and run <code>python main.py</code></li>
</ul><h2>Usage</h2></p><h3>Download Model Weights</h3>
Please first to prepare the model weights in ComfyUI format by referring to the follow links:
<ul><li><a href="https://comfyanonymous.github.io/ComfyUI_examples/wan/" target="_blank" rel="noopener noreferrer">Wan2.1</a></li>
<li><a href="https://comfyanonymous.github.io/ComfyUI_examples/hunyuan_video/" target="_blank" rel="noopener noreferrer">HunyuanVideo</a></li>
<li><a href="https://comfyanonymous.github.io/ComfyUI_examples/flux/" target="_blank" rel="noopener noreferrer">FLUX</a></li>
<li><a href="https://huggingface.co/lodestones/Chroma" target="_blank" rel="noopener noreferrer">Chroma</a></li></p><p></ul><h3>MagCache</h3></p><p><strong>We're collecting the best parameter settings from the community. Open this <a href="https://github.com/Zehong-Ma/ComfyUI-MagCache/issues/15" target="_blank" rel="noopener noreferrer">discussion issue</a> to contribute your configuration!</strong></p><p>To use MagCache node, simply add <code>MagCache</code> node to your workflow after <code>Load Diffusion Model</code> node or <code>Load LoRA</code> node (if you need LoRA). Generally, MagCache can achieve a speedup of 2x to 3x with acceptable visual quality loss. The following table gives the recommended magcache_thresh, retention_ratio and magcache_K ​for different models:</p><p><div align="center"></p><p>| Models                       |   magcache_thresh |   retention_ratio |    magcache_K     |  
|:----------------------------:|:-----------------:|:-----------------:|:-----------------:|
| FLUX                         |        0.24       |         0.1       |         5         |
| FLUX-Kontext                 |        0.05       |         0.2       |         4         |
| Chroma                       |        0.10       |         0.25      |         2         |
| HunyuanVideo-T2V             |        0.24       |         0.2       |         6         |
| Wan2.1-T2V-1.3B              |        0.12       |         0.2       |         4         |
| Wan2.1-T2V-14B               |        0.24       |         0.2       |         6         |
| Wan2.1-I2V-480P-14B          |        0.24       |         0.2       |         6         |
| Wan2.1-I2V-720P-14B          |        0.24       |         0.2       |         6         |
| Wan2.1-VACE-1.3B             |        0.02       |         0.2       |         3         |</p><p></div></p><p><strong>If the image/video after applying MagCache is of low quality, please decrease <code>magcache_thresh</code> and <code>magcache_K</code></strong>. The default parameters are configured for extremely fast inference(2x-3x), which may lead to failures in some cases.</p><p>The demo workflows (<a href="https://raw.githubusercontent.com/Zehong-Ma/ComfyUI-MagCache/main/./examples/flux.json" target="_blank" rel="noopener noreferrer">flux</a>, <a href="https://raw.githubusercontent.com/Zehong-Ma/ComfyUI-MagCache/main/./examples/flux_1_kontext_dev.json" target="_blank" rel="noopener noreferrer">flux-kontext</a>, <a href="https://raw.githubusercontent.com/Zehong-Ma/ComfyUI-MagCache/main/./examples/chroma.json" target="_blank" rel="noopener noreferrer">chroma</a>, <a href="https://raw.githubusercontent.com/Zehong-Ma/ComfyUI-MagCache/main/./examples/hunyuanvideo.json" target="_blank" rel="noopener noreferrer">hunyuanvideo</a>, <a href="https://raw.githubusercontent.com/Zehong-Ma/ComfyUI-MagCache/main/./examples/wan2.1_t2v.json" target="_blank" rel="noopener noreferrer">wan2.1_t2v</a>, <a href="https://raw.githubusercontent.com/Zehong-Ma/ComfyUI-MagCache/main/./examples/wan2.1_i2v.json" target="_blank" rel="noopener noreferrer">wan2.1_i2v</a>, and <a href="https://raw.githubusercontent.com/Zehong-Ma/ComfyUI-MagCache/main/./examples/wan2.1_vace.json" target="_blank" rel="noopener noreferrer">wan2.1_vace</a>) are placed in examples folder. The workflow <a href="https://raw.githubusercontent.com/Zehong-Ma/ComfyUI-MagCache/main/./examples/chroma_calibration.json" target="_blank" rel="noopener noreferrer">chroma_calibration</a> is used to calibrate the <code>mag_ratios</code> for <code>Chroma</code> when the number of inference steps differs from the pre-defined value.
<strong>In our experiments, the videos generated by Wan2.1 are not as high-quality as those produced by the <a href="https://github.com/Wan-Video/Wan2.1" target="_blank" rel="noopener noreferrer">original unquantized version</a>.</strong></p><h3>Compile Model</h3>
To use Compile Model node, simply add <code>Compile Model</code> node to your workflow after <code>Load Diffusion Model</code> node or <code>MagCache</code> node. Compile Model uses <code>torch.compile</code> to enhance the model performance by compiling model into more efficient intermediate representations (IRs). This compilation process leverages backend compilers to generate optimized code, which can significantly speed up inference. The compilation may take long time when you run the workflow at first, but once it is compiled, inference is extremely fast. 
<!-- The usage is shown below: -->
<!-- <img src="https://raw.githubusercontent.com/Zehong-Ma/ComfyUI-MagCache/main/./assets/compile.png" alt=""> --></p><h2>Acknowledgments</h2>
Thanks to <a href="https://github.com/welltop-cn/ComfyUI-TeaCache" target="_blank" rel="noopener noreferrer">ComfyUI-TeaCache</a>, <a href="https://github.com/comfyanonymous/ComfyUI" target="_blank" rel="noopener noreferrer">ComfyUI</a>, <a href="https://github.com/wildminder/ComfyUI-MagCache" target="_blank" rel="noopener noreferrer">ComfyUI-MagCache</a>, <a href="https://github.com/Zehong-Ma/MagCache/" target="_blank" rel="noopener noreferrer">MagCache</a>, <a href="https://github.com/ali-vilab/TeaCache" target="_blank" rel="noopener noreferrer">TeaCache</a>, <a href="https://github.com/Tencent/HunyuanVideo" target="_blank" rel="noopener noreferrer">HunyuanVideo</a>, <a href="https://github.com/black-forest-labs/flux" target="_blank" rel="noopener noreferrer">FLUX</a>, <a href="https://huggingface.co/lodestones/Chroma" target="_blank" rel="noopener noreferrer">Chroma</a>, and <a href="https://github.com/Wan-Video/Wan2.1" target="_blank" rel="noopener noreferrer">Wan2.1</a>.</p><p>
---

Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">Open Ai Tx</a> | Last indexed: 2025-07-18

---</p>
        </div>
        
        <div class="original-link">
            <strong>Original README:</strong> <a href="https://raw.githubusercontent.com/Zehong-Ma/ComfyUI-MagCache/main/README.md" target="_blank" rel="noopener noreferrer">View on GitHub</a>
        </div>
    </div>
    
    <div class="footer">
        <p>Translated by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">OpenAiTx</a> | 
        Last updated: 2025-09-16 
    </div>
    
</body>
</html>