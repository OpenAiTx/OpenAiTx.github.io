<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hddfancontrol - 根据硬盘温度调节风扇速度</title>
    <meta name="description" content="根据硬盘温度调节风扇速度">
    <meta name="keywords" content="hddfancontrol, Simplified Chinese, documentation, GitHub, open source">
    <meta name="author" content="OpenAiTx">
    <meta name="robots" content="index, follow">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "hddfancontrol",
  "description": "根据硬盘温度调节风扇速度",
  "author": {
    "@type": "Person",
    "name": "desbma"
  },
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "5",
    "ratingCount": 186
  },
  "url": "https://OpenAiTx.github.io/projects/desbma/hddfancontrol/README-zh-CN.html",
  "sameAs": "https://raw.githubusercontent.com/desbma/hddfancontrol/master/README.md",
  "datePublished": "2025-12-09",
  "dateModified": "2025-12-09"
}
    </script>
    
    <!-- GitHub-style CSS -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #24292e;
            background-color: #ffffff;
            max-width: 980px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .container {
            background: #ffffff;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 24px;
            margin-bottom: 20px;
        }
        
        .header {
            border-bottom: 1px solid #e1e4e8;
            padding-bottom: 16px;
            margin-bottom: 24px;
        }
        
        .project-title {
            font-size: 2em;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .project-title a {
            color: #24292e;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: color 0.2s ease;
        }
        
        .project-title a:hover {
            color: #0366d6;
            text-decoration: none;
        }
        
        .project-title .github-icon {
            width: 1em;
            height: 1em;
            fill: currentColor;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }
        
        .project-title a:hover .github-icon {
            opacity: 1;
        }
        
        .project-meta {
            color: #586069;
            font-size: 14px;
            margin-bottom: 16px;
        }
        
        .stars {
            display: inline-block;
            margin-right: 16px;
        }
        
        .language {
            display: inline-block;
            background-color: #f1f8ff;
            color: #0366d6;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .content {
            font-size: 16px;
            line-height: 1.6;
        }
        
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
            color: #24292e;
        }
        
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        
        p {
            margin-bottom: 16px;
        }
        
        code {
            background-color: #f6f8fa;
            border-radius: 3px;
            font-size: 85%;
            margin: 0;
            padding: 0.2em 0.4em;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        }
        
        pre {
            background-color: #f6f8fa;
            border-radius: 6px;
            font-size: 85%;
            line-height: 1.45;
            overflow: auto;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        pre code {
            background-color: transparent;
            border: 0;
            display: inline;
            line-height: inherit;
            margin: 0;
            overflow: visible;
            padding: 0;
            word-wrap: normal;
        }
        
        a {
            color: #0366d6;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        ul, ol {
            margin-bottom: 16px;
            padding-left: 2em;
        }
        
        li {
            margin-bottom: 0.25em;
        }
        
        blockquote {
            border-left: 4px solid #dfe2e5;
            color: #6a737d;
            margin: 0 0 16px 0;
            padding: 0 1em;
        }
        
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e1e4e8;
            color: #586069;
            font-size: 14px;
            text-align: center;
        }
        
        .footer a {
            color: #0366d6;
        }
        
        .original-link {
            margin-top: 16px;
            padding: 12px;
            background-color: #f6f8fa;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 16px;
            }
            
            .project-title {
                font-size: 1.5em;
            }
        }
    </style>
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <!-- Bing Count -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sh95yd6uwt");
    </script>        

    <!-- Statcounter -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>    
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="project-title">
                <a href="https://github.com/desbma/hddfancontrol" target="_blank" rel="noopener noreferrer">
                    <svg class="github-icon" viewBox="0 0 16 16" aria-hidden="true">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                    hddfancontrol
                </a>
            </h1>
            <div class="project-meta">
                <span class="stars">⭐ 186 stars</span>
                <span class="language">Simplified Chinese</span>
                <span>by desbma</span>
            </div>
        </div>
        
        <div class="content">
            <h1>硬盘风扇控制</h1></p><p><a href="https://github.com/desbma/hddfancontrol/actions" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/actions/workflow/status/desbma/hddfancontrol/ci.yml" alt="CI 状态"></a>
<a href="https://crates.io/crates/hddfancontrol" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/crates/v/hddfancontrol" alt="crates.io 版本"></a>
<a href="https://aur.archlinux.org/packages/hddfancontrol/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/aur/version/hddfancontrol.svg?style=flat" alt="AUR 版本"></a>
<a href="https://github.com/desbma/hddfancontrol/blob/master/LICENSE" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/license/desbma/hddfancontrol.svg?style=flat" alt="许可证"></a></p><hr></p><p>自 2.0 版本起，该工具已用 Rust 重写。之前的 Python 版本可在 <a href="https://github.com/desbma/hddfancontrol/tree/v1" target="_blank" rel="noopener noreferrer">v1 分支</a> 中找到。有关迁移，请参见 <a href="#migrating-from-v1x" target="_blank" rel="noopener noreferrer">从 v1.x 迁移</a>。</p><hr></p><p>硬盘风扇控制是一个命令行工具，用于根据 Linux 上硬盘温度动态控制风扇转速。</p><p>这有三个好处：</p><ul><li>它允许将硬盘保持在理想温度范围，以获得最大寿命并避免过热</li></p><p></ul>因为风扇在不需要时会减速或停止：</p><ul><li>它最大限度地减少风扇产生的噪音</li>
<li>同时最大限度地减少电力消耗</li></p><p></ul><h2>目录</h2></p><ul><li><a href="#when-is-this-useful" target="_blank" rel="noopener noreferrer">何时有用？</a></li>
<li><a href="#features" target="_blank" rel="noopener noreferrer">功能</a></li>
<li><a href="#prerequisites" target="_blank" rel="noopener noreferrer">先决条件</a></li>
<li><a href="#installation" target="_blank" rel="noopener noreferrer">安装</a></li>
  <li><a href="#distribution-packages" target="_blank" rel="noopener noreferrer">发行版软件包</a></li>
  <li><a href="#from-source" target="_blank" rel="noopener noreferrer">从源码安装</a></li>
<li><a href="#configuration" target="_blank" rel="noopener noreferrer">配置</a></li>
  <li><a href="#a-word-of-caution" target="_blank" rel="noopener noreferrer">注意事项</a></li>
  <li><a href="#fan-configuration" target="_blank" rel="noopener noreferrer">风扇配置</a></li>
<li><a href="#changelog" target="_blank" rel="noopener noreferrer">更新日志</a></li>
  <li><a href="#migrating-from-v1x" target="_blank" rel="noopener noreferrer">从 v1.x 迁移</a></li>
<li><a href="#command-line-usage" target="_blank" rel="noopener noreferrer">命令行使用</a></li>
<li><a href="#systemd-service" target="_blank" rel="noopener noreferrer">systemd 服务</a></li>
<li><a href="#license" target="_blank" rel="noopener noreferrer">许可证</a></li>
</ul><h2>什么时候有用？</h2></p><p>HDD 风扇控制在您有一个或多个硬盘，并且有一个或多个风扇靠近它们时非常有用，且不希望主板控制风扇速度，因为主板要么静态控制，要么使用与实际硬盘温度无关的温度传感器（可能在 CPU 上或主板的其他位置）。</p><p>理想的使用场景是带有多个硬盘、低功耗 CPU（如 ARM 或 Intel Atom）且采用无风扇被动散热的 NAS，机箱中有靠近硬盘的风扇。在这种情况下，CPU 产生的热量比硬盘少，因此根据主要热源控制风扇速度更合理。</p><h2>功能</h2></p><ul><li>可以通过一次调用控制多个风扇和/或多个硬盘</li>
<li>支持 6 种不同的温度查询方式：</li>
  <li>调用 <code>hddtemp</code></li>
  <li>查询 <code>hddtemp</code> 守护进程</li>
  <li>调用 <code>hdparm</code></li>
  <li>调用 <code>smartctl</code>（SCT）</li>
  <li>调用 <code>smartctl</code>（SMART 属性）</li>
  <li>内核 hwmon 原生 <code>drivetemp</code></li>
<li>可以适应不同的风扇特性</li>
<li>可根据您的需求自定义：</li>
  <li>在可自定义温度下停止风扇或全速运行</li>
  <li>永远不将风扇速度设定低于某个值（当 HDD 风扇控制是机箱中唯一可用风扇时非常有用）</li>
<li>还可以选择监控 CPU 温度，并相应控制风扇速度</li></p><p></ul><h2>先决条件</h2></p><ul><li>一个 Linux 发行版</li>
<li>至少一个支持以下功能的 SATA/SAS\* 硬盘：</li>
  <li>温度查询</li>
  <li>电源状态查询</li>
<li>一个主板，能够：</li>
  <li>向操作系统暴露用于控制风扇速度的 PWM</li>
  <li>向操作系统暴露用于查询风扇速度的传感器</li></p><p></ul>大多数主板和 SATA 硬盘均满足这些要求。</p><p>\* 有多份报告显示 <code>hddfancontrol</code> 在 SAS 硬盘上表现良好，但该情况测试少于 SATA。</p><h2>安装</h2></p><h3>发行版软件包</h3></p><p>一些 Linux 发行版在其仓库中提供了 hddfancontrol 软件包：</p><ul><li>Alpine Linux（测试版）：<a href="https://pkgs.alpinelinux.org/package/edge/testing/x86_64/hddfancontrol" target="_blank" rel="noopener noreferrer">hddfancontrol</a></li>
<li>Arch Linux（AUR）：<a href="https://aur.archlinux.org/packages/hddfancontrol/" target="_blank" rel="noopener noreferrer">hddfancontrol</a></li>
<li>Fedora：<a href="https://packages.fedoraproject.org/pkgs/hddfancontrol/hddfancontrol/" target="_blank" rel="noopener noreferrer">hddfancontrol</a></li></p><p></ul>有关每个标记版本构建的其他软件包/二进制文件，请参见 <a href="https://github.com/desbma/hddfancontrol/releases" target="_blank" rel="noopener noreferrer">GitHub 发布页面</a>。</p><h3>从源码安装</h3></p><p>您需要一个 Rust 构建环境，例如来自 <a href="https://rustup.rs/" target="_blank" rel="noopener noreferrer">rustup</a>。</p><p>在当前仓库中运行：</p><pre><code class="language-">cargo build --release
install -Dm 755 -t /usr/local/bin target/release/hddfancontrol</code></pre>
还需安装 <a href="http://sourceforge.net/projects/hdparm/" target="_blank" rel="noopener noreferrer">hdparm</a>、<a href="https://www.smartmontools.org/" target="_blank" rel="noopener noreferrer">smartctl</a>、<a href="https://sg.danny.cz/sg/sdparm.html" target="_blank" rel="noopener noreferrer">sdparm</a>（用于支持 SAS 硬盘），以及可选的 <a href="http://www.guzu.net/linux/hddtemp.php" target="_blank" rel="noopener noreferrer">hddtemp</a>。
在最新的 Ubuntu 和其他 Debian 衍生版本上：<code>sudo apt install hdparm sdparm smartmontools</code>。</p><p>参见 <a href="#systemd-service" target="_blank" rel="noopener noreferrer">systemd 服务</a> 以便轻松管理守护进程。</p><h3>来自 <a href="https://crates.io/" target="_blank" rel="noopener noreferrer"><code>crates.io</code></a></h3></p><pre><code class="language-">sudo cargo install --root /usr/local</code></pre>
<h2>配置</h2></p><h3>注意事项</h3></p><p>默认参数将在温度 > 50°C 时以 100% 转速运行风扇，在温度 < 30°C 时以 20% 转速运行风扇，这对应于通常推荐的驱动器工作温度。如果您确定系统中没有其他产生显著热量的组件，或者您有其他风扇来冷却系统，或者您有一个优化了被动冷却的机箱，您可以将最低转速设置为 0%，这样在温度低于最低阈值时风扇将停止转动。</p><p><strong>请注意，错误配置此工具可能导致系统无法正确冷却，从而损坏组件或缩短其寿命。</strong></p><p>在长时间无人监控使用 HDD 风扇控制前，建议保持最低风扇转速以确保安全，并检查系统温度是否保持在合理范围内。</p><h3>风扇配置</h3></p><p>要获取 <code>--pwm</code> 参数的启动/停止值，您可以：</p><ul><li>使用 <code>pwm-test</code> 命令（<code>hddfancontrol pwm-test ...</code>），它将运行一些测试并检测风扇启动和停止时的值。但您需要事先确定 PWM 文件（<code>--pwm</code> 参数）。</li>
<li>使用 <a href="http://www.lm-sensors.org/wiki/man/pwmconfig" target="_blank" rel="noopener noreferrer">pwmconfig 工具</a>。</li></p><p></ul><h2>更新日志</h2></p><p>请参阅 <a href="https://raw.githubusercontent.com/desbma/hddfancontrol/master/./CHANGELOG.md" target="_blank" rel="noopener noreferrer">详细更新日志</a> 查看自初始版本 2 以来的所有变更。</p><h3>从 v1.x 迁移</h3></p><p>在版本 2 中，<code>hddfancontrol</code> 完全用 Rust 语言重写。与版本 1 相比，主要变化包括：</p><ul><li><code>hddfancontrol</code> 是编译后的二进制文件，不再需要 Python 解释器。</li>
<li>命令行参数稍有变化，您需要手动调整，无论是在调用 <code>hddfancontrol</code> 时，还是如果通过 systemd 服务使用，则在 <code>/etc/conf.d/hddfancontrol</code> 文件中。参考 <code>hddfancontrol daemon -h</code>。</li>
<li>自动硬盘休眠功能已被移除。如果您需要此功能，建议使用 <a href="https://github.com/adelolmo/hd-idle" target="_blank" rel="noopener noreferrer">hd-idle</a>（注意有多个类似名称的项目），它能很好地与 <code>hddfancontrol</code> 配合使用。</li></p><p></ul><h2>命令行用法</h2></p><p>运行 <code>hddfancontrol -h</code> 可获取完整命令行参考。</p><p>例如，下面的命令行将指示 HDD 风扇控制：</p><ul><li>监控驱动器 <code>/dev/sda</code> 和 <code>/dev/sdb</code> 的温度</li>
<li>使用 <code>/sys/class/hwmon/hwmon1/device/</code> 中的 PWM 2 和 3 控制风扇转速</li>
<li>以 PWM 值 200 启动两个风扇</li>
<li>认为风扇在 PWM 值 75 时停止</li></p><p><li>风扇转速绝不低于最大转速的10%</li>
<li>至少每分钟检查一次温度</li></p><p></ul><code>hddfancontrol daemon -d /dev/sda /dev/sdb -p /sys/class/hwmon/hwmon1/device/pwm2:200:75 /sys/class/hwmon/hwmon1/device/pwm3:200:75 --min-fan-speed-prct 10 -i 1min</code></p><h2>systemd 服务</h2></p><p>提供了一个 systemd 服务文件以便轻松控制守护进程。
如果你是通过发行版包安装的 hddfancontrol，通常已经安装了该服务文件，否则你可以从本仓库源码安装：</p><pre><code class="language-">sudo install -Dm 644 ./systemd/hddfancontrol.service /etc/systemd/system/hddfancontrol.service
sudo install -Dm 644 ./systemd/hddfancontrol.conf /etc/conf.d/hddfancontrol</code></pre></p><p>然后您需要编辑 <code>/etc/conf.d/hddfancontrol</code> 中的 <code>HDDFANCONTROL_DAEMON_ARGS</code> 变量来设置参数（硬盘，温度范围等）。</p><p>然后您可以使用 <code>sudo systemctl start hddfancontrol</code> 启动守护进程，使用 <code>sudo systemctl status hddfancontrol</code> 查看其状态，并使用 <code>sudo systemctl enable hddfancontrol</code> 启用开机自动启动。</p><h2>许可协议</h2></p><p><a href="https://www.gnu.org/licenses/gpl-3.0-standalone.html" target="_blank" rel="noopener noreferrer">GPLv3</a></p><p>
---

Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">Open Ai Tx</a> | Last indexed: 2025-12-09

---</p>
        </div>
        
        <div class="original-link">
            <strong>Original README:</strong> <a href="https://raw.githubusercontent.com/desbma/hddfancontrol/master/README.md" target="_blank" rel="noopener noreferrer">View on GitHub</a>
        </div>
    </div>
    
    <div class="footer">
        <p>Translated by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" rel="noopener noreferrer">OpenAiTx</a> | 
        Last updated: 2025-12-09 
    </div>
    
</body>
</html>